import{f as e,a as s,_ as t,t as o,n as l,q as i,b as a,c as d,e as n}from"./shell-ceb66a5c.js";import{i as c,s as r,x as h,c as p,I as u}from"./icon-04f6a077.js";import{t as m}from"./throttle-cde4a556.js";import{c as C,d as b,e as y}from"./mod-notes-3fd8d958.js";const S=e(r);let k=class extends S{constructor(){super(...arguments),this.isModNotesRailClientSourceLoaded=!1,this.isPDP=!1,this.openModNoteRail=async e=>{const s=document.getElementById(C);try{const t=this.querySelector(`faceplate-partial[name="${b}"]`),o=this.querySelector(`shreddit-async-loader[name="${b}"]`);if(!t||!o)return;this.classList.remove("hidden"),t.classList.add("hidden"),s?.classList.remove("hidden");let l=y;for(const s in e){const t=e[s];l=l.replace(`/:${s}`,`/${t}`)}t.src=l,this.isModNotesRailClientSourceLoaded?await t.load():(await Promise.allSettled([o.load(),t.load()]),this.isModNotesRailClientSourceLoaded=!0),s?.classList.add("hidden"),t.classList.remove("hidden")}catch(e){}this.onScrollHandlerThrottled()},this.onScrollHandler=()=>{const e=this.getBoundingClientRect();this.style.height=`calc(100vh - ${e.top}px - ${this.isPDP?"16px":"0"}16px - 1px)`},this.onScrollHandlerThrottled=m(this.onScrollHandler,200,!0),this.handleCloseClick=()=>{this.classList.add("hidden"),this.publish(i.ModNotesRailClose)}}connectedCallback(){super.connectedCallback(),this.subscribe(i.ModNotesRailOpen,this.openModNoteRail,!1),this.subscribe(i.ModNotesRailForceClose,this.handleCloseClick,!1),document.addEventListener("scroll",this.onScrollHandlerThrottled)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe(i.ModNotesRailOpen,this.openModNoteRail),this.unsubscribe(i.ModNotesRailForceClose,this.handleCloseClick),document.removeEventListener("scroll",this.onScrollHandlerThrottled)}handleCloseKeyboardEnter(e){"Enter"===e.key&&this.handleCloseClick()}render(){return h`\n <slot></slot>\n <div \n class="absolute top-md right-md z-10" \n @click="${this.handleCloseClick}" \n @keyup="${this.handleCloseKeyboardEnter}" \n>\n ${a({leadingIcon:p({size:u.Small}),size:d.Small,attributes:{className:"opacity-80 button-media"}})}\n </div>\n `}};k.styles=[s,c`:host{display:block}`],t([o()],k.prototype,"isModNotesRailClientSourceLoaded",void 0),t([l({type:Boolean,attribute:"is-pdp"})],k.prototype,"isPDP",void 0),k=t([n("mod-notes-rail-closer")],k);
//# sourceMappingURL=mod-notes-rail-container-client-js-f2b84845.js.map
