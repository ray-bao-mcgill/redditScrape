import"./dsa-transparency-modal-5b0fbaa6.js";import{a as s,_ as t,n as a,w as e,t as i,r,ay as n,c0 as o,J as d,q as p,e as c}from"./shell-ceb66a5c.js";import{s as l,x as h}from"./icon-04f6a077.js";import"./faceplate-modal-b5af7f91.js";import"./faceplate-bottom-sheet-d2dd0726.js";import"./TinyGesture-6f7cc1aa.js";let m=class extends l{constructor(){super(),this.postId="",this.impressionId="",this.placement="",this.pubsub=new r(this),this._activateFeature=async s=>n(s),this.initDsaTransparencyModal=async s=>{this.target=s.target,this.postId=s.postId,this.adUserTargetingInfo=s.adUserTargetingInfo,this.impressionId=s.impressionId,this.placement=s.placement;const{gender:t,interests:a,locations:e,targetingCriteria:i}=this.adUserTargetingInfo,r={};t&&(r.gender=`${t}`),a&&a.length>0&&(r.interests=`${a.toString()}`),e&&e.length>0&&(r.locations=`${e.join("-")}`),i&&i.length>0&&(r.targeting_criteria=`${i.toString()}`),await this._activateFeature({name:o,queryParams:{post_id:this.postId,impression_id:this.impressionId,is_desktop:!!this.isDesktop,placement:this.placement.toString(),...r},renderMode:d.Contents});const n=this.querySelector("dsa-transparency-modal");n&&n.initModal()},this.closeDsaTransparencyModal=async()=>{await(this.dsaTransparencyModal?.updateComplete),this.target?.focus()},this.addEventListener("dsa-transparency-modal-close",this.closeDsaTransparencyModal)}connectedCallback(){super.connectedCallback(),this.pubsub.subscribe(p.DsaTransparencyModal,this.initDsaTransparencyModal,!1)}disconnectedCallback(){this.pubsub.unsubscribe(p.DsaTransparencyModal,this.initDsaTransparencyModal),super.disconnectedCallback()}render(){return h`<slot></slot>`}};m.styles=[s],t([a({type:Boolean,attribute:"is-desktop"})],m.prototype,"isDesktop",void 0),t([e("dsa-transparency-modal")],m.prototype,"dsaTransparencyModal",void 0),t([i()],m.prototype,"postId",void 0),t([i()],m.prototype,"impressionId",void 0),t([i()],m.prototype,"adUserTargetingInfo",void 0),t([i()],m.prototype,"placement",void 0),m=t([c("dsa-transparency-modal-provider")],m);
//# sourceMappingURL=dsa-transparency-modal-provider-client-js-acdca140.js.map
