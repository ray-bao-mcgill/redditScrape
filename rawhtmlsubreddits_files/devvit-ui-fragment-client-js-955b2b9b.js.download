import{s as t,x as e,i as n}from"./icon-04f6a077.js";import{m as i,_ as r,L as s,S as o,R as a,B as u,U as h,s as c,a as l,b as f,E as d,c as p,f as v,d as m,t as _,e as g}from"./index-d322dcde.js";import{H as b,E as w,d as y,a as E,b as I,c as k,e as S,L as R}from"./devvit-effect-wrapper-cfc5f4e4.js";import{n as A,t as L,w as T,e as C,g as q,bk as O,ea as N,l as P,W as M,v as $,a as D,_ as x,bq as j,cB as U,eb as B,a1 as W}from"./shell-ceb66a5c.js";import{D as V,a as z,b as F,B as G,c as X,d as H}from"./devvit-blocks-renderer-15757b9a.js";import{D as J,A as Q,c as Y}from"./v2-events-06a0fbaa.js";import{D as Z}from"./display-theme-7e251d41.js";import"./rtjson-77078299.js";import"./lexical-6ad81da7.js";import"./scroll-blocker-e4a9bbc1.js";import"./index-dee8dbf2.js";import"./payments-0516ecba.js";import"./upload-3b5a159b.js";import"./telemetry-event-struct-70372e12.js";import"./upload-to-s3-a404e163.js";import"./ui-strings-4cc98385.js";import"./faceplate-form-494ed7ef.js";import"./form-common-utils-d3476c65.js";import"./when-4042a907.js";import"./choose-0ab0f133.js";import"./faceplate-switch-input-17cfc01a.js";import"./checked-input-element-a822f47d.js";import"./faceplate-input-dc5282a4.js";import"./input-element-2bee98eb.js";import"./faceplate-carousel-65d67742.js";import"./TinyGesture-6f7cc1aa.js";import"./makeEventDispatcher-28989282.js";import"./badge-84cdd087.js";import"./text-input-5a8d8b87.js";import"./faceplate-text-input-999c3dd8.js";import"./live-2ab1644c.js";import"./faceplate-textarea-input-25459e07.js";import"./faceplate-dropdown-menu-f1045f04.js";import"./popper-controller-d9d10574.js";import"./faceplate-menu-210a1c41.js";import"./dropdownButton-38c393e7.js";import"./list-item-b879d870.js";import"./faceplate-checkbox-input-ea3baf77.js";import"./faceplate-radio-input-4737b7b4.js";class K extends Error{constructor(t,e){super("ServerCallRequired"),this.response=t,this.cause=e,this.name="CircuitBreakerResponse"}}function tt(t){return"ServerCallRequired"===t?.message}function et(t,e){let n,i,r=0;return function(...s){return i=s,n??(n=setTimeout((()=>{r=Date.now(),n=void 0;const e=i;i=void 0,t.apply(this,e)}),Math.max(0,e-(Date.now()-r)))),()=>{null!=n&&clearTimeout(n),n=void 0,i=void 0}}}var nt;function it(t){!function(t,e){if(!t)throw Error(e)}(function(t){return t.startsWith(nt.LINK)}(t),`Expected link id to start with ${nt.LINK}, got ${t}}`)}function rt(t){return it(t),t}!function(t){t.COMMENT="t1_",t.ACCOUNT="t2_",t.LINK="t3_",t.MESSAGE="t4_",t.SUBREDDIT="t5_",t.AWARD="t6_"}(nt||(nt={}));function st(t,e,n){const{width:i,height:r}=t.contentRect,s=e.getComputedStyle(n).fontSize.split("px")[0],o=s?parseFloat(s)/16:1;return{width:Math.round(i),height:Math.round(r),scale:e.devicePixelRatio,fontScale:o}}var ot,at;function ut(t){return t.hostname.split(".")[1]??t.hostname}function ht(t){return`${ut(t)}@${t.actor?.version} by ${t.actor?.owner}`}!function(t){t.ENABLE_APP_LOGGING="enableAppLogging",t.ENABLE_DEBUG_LOGGING="enableDebugLogging",t.ENABLE_PLUGINS="enablePlugins",t.LOAD_BUNDLE="loadBundle",t.CALL="call",t.PLUGIN_RESPONSE="pluginResponse",t.QUIT="quit"}(ot||(ot={})),function(t){t.READY="ready",t.PLUGINS_CONFIGURED="pluginsConfigured",t.BUNDLE_LOADED="bundleLoaded",t.BUNDLE_LOAD_FAILED="bundleLoadFailed",t.RETURN="return",t.ERROR="error",t.CIRCUIT_BREAKER="circuitBreaker",t.PLUGIN_CALL="pluginCall",t.UNHANDLED_REJECTION="unhandledRejection"}(at||(at={}));const ct={$type:"devvit.cli.PlaytestProviderMessage",encode:(t,e=r.Writer.create())=>(void 0!==t.callState&&dt.encode(t.callState,e.uint32(10).fork()).ldelim(),void 0!==t.connect&&pt.encode(t.connect,e.uint32(18).fork()).ldelim(),e),decode(t,e){const n=t instanceof r.Reader?t:r.Reader.create(t);let i=void 0===e?n.len:n.pos+e;const s={callState:void 0,connect:void 0};for(;n.pos<i;){const t=n.uint32();switch(t>>>3){case 1:if(10!==t)break;s.callState=dt.decode(n,n.uint32());continue;case 2:if(18!==t)break;s.connect=pt.decode(n,n.uint32());continue}if(4==(7&t)||0===t)break;n.skipType(7&t)}return s},fromJSON:t=>({callState:vt(t.callState)?dt.fromJSON(t.callState):void 0,connect:vt(t.connect)?pt.fromJSON(t.connect):void 0}),toJSON(t){const e={};return void 0!==t.callState&&(e.callState=dt.toJSON(t.callState)),void 0!==t.connect&&(e.connect=pt.toJSON(t.connect)),e},create:t=>ct.fromPartial(t??{}),fromPartial(t){const e={callState:void 0,connect:void 0};return e.callState=void 0!==t.callState&&null!==t.callState?dt.fromPartial(t.callState):void 0,e.connect=void 0!==t.connect&&null!==t.connect?pt.fromPartial(t.connect):void 0,e}};i.set(ct.$type,ct);const lt={$type:"devvit.cli.PlaytestSubscriberMessage",encode:(t,e=r.Writer.create())=>(void 0!==t.appInstalled&&ft.encode(t.appInstalled,e.uint32(10).fork()).ldelim(),e),decode(t,e){const n=t instanceof r.Reader?t:r.Reader.create(t);let i=void 0===e?n.len:n.pos+e;const s={appInstalled:void 0};for(;n.pos<i;){const t=n.uint32();switch(t>>>3){case 1:if(10!==t)break;s.appInstalled=ft.decode(n,n.uint32());continue}if(4==(7&t)||0===t)break;n.skipType(7&t)}return s},fromJSON:t=>({appInstalled:vt(t.appInstalled)?ft.fromJSON(t.appInstalled):void 0}),toJSON(t){const e={};return void 0!==t.appInstalled&&(e.appInstalled=ft.toJSON(t.appInstalled)),e},create:t=>lt.fromPartial(t??{}),fromPartial(t){const e={appInstalled:void 0};return e.appInstalled=void 0!==t.appInstalled&&null!==t.appInstalled?ft.fromPartial(t.appInstalled):void 0,e}};i.set(lt.$type,lt);const ft={$type:"devvit.cli.PlaytestAppInstalled",encode:(t,e=r.Writer.create())=>e,decode(t,e){const n=t instanceof r.Reader?t:r.Reader.create(t);let i=void 0===e?n.len:n.pos+e;const s={};for(;n.pos<i;){const t=n.uint32();if(4==(7&t)||0===t)break;n.skipType(7&t)}return s},fromJSON:t=>({}),toJSON:t=>({}),create:t=>ft.fromPartial(t??{}),fromPartial:t=>({})};i.set(ft.$type,ft);const dt={$type:"devvit.cli.PlaytestCallState",encode(t,e=r.Writer.create()){for(const n of t.logs)s.encode(n,e.uint32(10).fork()).ldelim();return e},decode(t,e){const n=t instanceof r.Reader?t:r.Reader.create(t);let i=void 0===e?n.len:n.pos+e;const o={logs:[]};for(;n.pos<i;){const t=n.uint32();switch(t>>>3){case 1:if(10!==t)break;o.logs.push(s.decode(n,n.uint32()));continue}if(4==(7&t)||0===t)break;n.skipType(7&t)}return o},fromJSON:t=>({logs:globalThis.Array.isArray(t?.logs)?t.logs.map((t=>s.fromJSON(t))):[]}),toJSON(t){const e={};return t.logs?.length&&(e.logs=t.logs.map((t=>s.toJSON(t)))),e},create:t=>dt.fromPartial(t??{}),fromPartial(t){const e={logs:[]};return e.logs=t.logs?.map((t=>s.fromPartial(t)))||[],e}};i.set(dt.$type,dt);const pt={$type:"devvit.cli.PlaytestConnect",encode:(t,e=r.Writer.create())=>(""!==t.url&&e.uint32(10).string(t.url),e),decode(t,e){const n=t instanceof r.Reader?t:r.Reader.create(t);let i=void 0===e?n.len:n.pos+e;const s={url:""};for(;n.pos<i;){const t=n.uint32();switch(t>>>3){case 1:if(10!==t)break;s.url=n.string();continue}if(4==(7&t)||0===t)break;n.skipType(7&t)}return s},fromJSON:t=>({url:vt(t.url)?globalThis.String(t.url):""}),toJSON(t){const e={};return""!==t.url&&(e.url=t.url),e},create:t=>pt.fromPartial(t??{}),fromPartial(t){const e={url:""};return e.url=t.url??"",e}};function vt(t){return null!=t}i.set(pt.$type,pt);function mt(){if(!globalThis.location)return;return new URL(location.href).searchParams.get("playtest")??void 0}var _t,gt,bt,wt,yt,Et,It,kt,St=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)},Rt=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n};class At{constructor(){_t.add(this),gt.set(this,{type:"Init"}),yt.set(this,(()=>{"Opened"===St(this,gt,"f").type&&this.onState?.("Closed"),Rt(this,gt,St(this,_t,"m",wt).call(this),"f")})),Et.set(this,(t=>{switch(!0){case null!=lt.fromJSON(JSON.parse(t.data)).appInstalled:this.onState?.("Reloading")}})),It.set(this,(()=>{if("Opening"!==St(this,gt,"f").type)throw Error(`invalid transition from ${St(this,gt,"f").type}`);this.onState?.("Opened"),Rt(this,gt,{sock:St(this,gt,"f").sock,type:"Opened"},"f"),this.send({connect:{url:location.href}})})),kt.set(this,(()=>{Rt(this,gt,St(this,_t,"m",bt).call(this),"f")}))}close(){"timer"in St(this,gt,"f")&&clearTimeout(St(this,gt,"f").timer),"sock"in St(this,gt,"f")&&(St(this,gt,"f").sock.onopen=null,St(this,gt,"f").sock.onmessage=null,St(this,gt,"f").sock.onclose=null,St(this,gt,"f").sock.close()),Rt(this,gt,{type:"Init"},"f")}open(){"Init"===St(this,gt,"f").type&&Rt(this,gt,St(this,_t,"m",bt).call(this),"f")}send(t){"sock"in St(this,gt,"f")?St(this,gt,"f").sock.send(JSON.stringify(t)):console.warn("devvit playtest message dropped",t)}}gt=new WeakMap,yt=new WeakMap,Et=new WeakMap,It=new WeakMap,kt=new WeakMap,_t=new WeakSet,bt=function(){const t=new WebSocket("ws://localhost:5678");return t.onclose=St(this,yt,"f"),t.onmessage=St(this,Et,"f"),t.onopen=St(this,It,"f"),{sock:t,type:"Opening"}},wt=function(){return{timer:setTimeout(St(this,kt,"f"),15e3),type:"Retrying"}};var Lt,Tt,Ct,qt,Ot,Nt,Pt,Mt,$t,Dt,xt,jt,Ut,Bt,Wt,Vt,zt,Ft,Gt,Xt=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n},Ht=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)};const Jt={debug:o.DEBUG,error:o.ERROR,info:o.INFO,log:o.DEBUG,trace:o.DEBUG,warn:o.WARN};class Qt{constructor(t,e,n){Lt.add(this),Tt.set(this,void 0),Ct.set(this,void 0),qt.set(this,!1),Ot.set(this,0),Nt.set(this,void 0),Pt.set(this,{}),Mt.set(this,void 0),$t.set(this,(()=>{})),Dt.set(this,void 0),xt.set(this,void 0),jt.set(this,mt()),Ut.set(this,!1),Bt.set(this,void 0),Wt.set(this,(t=>{const e=t.data,[n]=e;switch(n){case at.READY:{const[,t]=e;Xt(this,Bt,t,"f"),Ht(this,Dt,"f")?.plugins?Ht(this,Lt,"m",Vt).call(this):Ht(this,Lt,"m",Ft).call(this);break}case at.PLUGINS_CONFIGURED:Ht(this,Lt,"m",Ft).call(this);break;case at.BUNDLE_LOADED:{const[,t,n]=e;Ht(this,Lt,"m",zt).call(this,t),Xt(this,qt,!0,"f"),Ht(this,Mt,"f")?.resolve({metrics:{init:Ht(this,Bt,"f"),loadBundle:n}}),Xt(this,Mt,void 0,"f");break}case at.BUNDLE_LOAD_FAILED:{const[,,t,n]=e;Ht(this,Lt,"m",zt).call(this,n),Ht(this,Mt,"f")?.reject(t),Xt(this,Mt,void 0,"f");break}case at.RETURN:{const[,t,n,i]=e;Ht(this,Lt,"m",zt).call(this,i),Ht(this,Pt,"f")[t]?.resolve(n),delete Ht(this,Pt,"f")[t];break}case at.ERROR:{const[,t,n,i]=e;Ht(this,Lt,"m",zt).call(this,i),Ht(this,Pt,"f")[t]?.reject(n),delete Ht(this,Pt,"f")[t];break}case at.CIRCUIT_BREAKER:{const[,t,n,i]=e;Ht(this,Pt,"f")[t]?.reject(new K(n,i)),delete Ht(this,Pt,"f")[t];break}case at.PLUGIN_CALL:{const[,t,n,i,r,s]=e;Ht(this,Dt,"f")?.callback(t,n,i,r,s);break}case at.UNHANDLED_REJECTION:{const[,,t,n]=e;Ht(this,Lt,"m",zt).call(this,n),Ht(this,$t,"f").call(this,"UnhandledRejection",t);break}}})),Gt.set(this,(t=>{switch(t){case"Opened":console.info("devvit playtest connected");break;case"Closed":console.info("devvit playtest disconnected");break;case"Reloading":{console.info("devvit playtest reloading"),Ht(this,xt,"f")?.close();const t=new URL(location.href);t.searchParams.set("playtest",Ht(this,jt,"f")??""),location.assign(t),location.reload();break}}})),Xt(this,Tt,t,"f"),e&&Xt(this,$t,e,"f"),n&&Xt(this,Dt,n,"f")}get ready(){return Ht(this,qt,"f")}get runtimeDebugLogging(){return Ht(this,Ut,"f")}set runtimeDebugLogging(t){t!==Ht(this,Ut,"f")&&(Xt(this,Ut,t,"f"),this.runtimeDebugLogging&&Ht(this,Ct,"f")?.postMessage([ot.ENABLE_DEBUG_LOGGING]))}async loadBundle(t){if(Ht(this,Ct,"f"))throw new Error("Bundle already loaded");const e=function(t){const e=mt();return""===e||e===t}(ut(t));e&&(Xt(this,xt,new At,"f"),Ht(this,xt,"f").onState=Ht(this,Gt,"f")),Ht(this,xt,"f")?.open();const n=new Worker(URL.createObjectURL(Ht(this,Tt,"f")),{name:`App: ${ht(t)}`,type:"module"});return n.onerror=t=>Ht(this,$t,"f").call(this,"Error",t.error),n.onmessageerror=t=>Ht(this,$t,"f").call(this,"MessageError",t.data),n.onmessage=Ht(this,Wt,"f"),Xt(this,Ct,n,"f"),Xt(this,Nt,t,"f"),this.runtimeDebugLogging&&Ht(this,Ct,"f").postMessage([ot.ENABLE_DEBUG_LOGGING]),e&&Ht(this,Ct,"f").postMessage([ot.ENABLE_APP_LOGGING]),new Promise(((t,e)=>{Xt(this,Mt,{resolve:t,reject:e},"f")}))}async call(t,e,n){var i;if(!Ht(this,qt,"f")||!Ht(this,Ct,"f"))throw new Error("No bundle loaded");const r=Xt(this,Ot,(i=Ht(this,Ot,"f"),++i),"f"),s=new Promise(((t,e)=>{Ht(this,Pt,"f")[r]={resolve:t,reject:e}}));return Ht(this,Ct,"f").postMessage([ot.CALL,r,t,e,n,!1]),s}onPluginResponse(t,e){Ht(this,Ct,"f")?.postMessage([ot.PLUGIN_RESPONSE,t,e])}quit(){Ht(this,xt,"f")?.close(),Xt(this,xt,void 0,"f"),Xt(this,qt,!1,"f"),Ht(this,Ct,"f")&&(Ht(this,Ct,"f").postMessage([ot.QUIT]),Ht(this,Ct,"f").onerror=null,Ht(this,Ct,"f").onmessageerror=null,Ht(this,Ct,"f").onmessage=null,Ht(this,Ct,"f").terminate()),Xt(this,Ct,void 0,"f");for(const{reject:t}of Object.values(Ht(this,Pt,"f")))t(Error("worker terminated"));Xt(this,Pt,{},"f"),Ht(this,Mt,"f")?.reject(Error("worker terminated")),Xt(this,Mt,void 0,"f")}}Tt=new WeakMap,Ct=new WeakMap,qt=new WeakMap,Ot=new WeakMap,Nt=new WeakMap,Pt=new WeakMap,Mt=new WeakMap,$t=new WeakMap,Dt=new WeakMap,xt=new WeakMap,jt=new WeakMap,Ut=new WeakMap,Bt=new WeakMap,Wt=new WeakMap,Gt=new WeakMap,Lt=new WeakSet,Vt=function(){Ht(this,Ct,"f")?.postMessage([ot.ENABLE_PLUGINS,Ht(this,Dt,"f")?.plugins??[]])},zt=function(t){if(!t.length)return;const e=new Date,n={logs:t.map((t=>({severity:Jt[t.method],message:t.args.join(" "),tags:[],timestamp:e})))};Ht(this,xt,"f")?.send({callState:n})},Ft=function(){Ht(this,Ct,"f")?.postMessage([ot.LOAD_BUNDLE,Ht(this,Nt,"f")]),Xt(this,Nt,void 0,"f")};var Yt={};!function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,i,s,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,s||t,o),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],a]:t._events[u].push(a):(t._events[u]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=new Array(s);r<s;r++)o[r]=i[r].fn;return o},a.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,r,s,o){var a=n?n+t:t;if(!this._events[a])return!1;var u,h,c=this._events[a],l=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),l){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,r),!0;case 5:return c.fn.call(c.context,e,i,r,s),!0;case 6:return c.fn.call(c.context,e,i,r,s,o),!0}for(h=1,u=new Array(l-1);h<l;h++)u[h-1]=arguments[h];c.fn.apply(c.context,u)}else{var f,d=c.length;for(h=0;h<d;h++)switch(c[h].once&&this.removeListener(t,c[h].fn,void 0,!0),l){case 1:c[h].fn.call(c[h].context);break;case 2:c[h].fn.call(c[h].context,e);break;case 3:c[h].fn.call(c[h].context,e,i);break;case 4:c[h].fn.call(c[h].context,e,i,r);break;default:if(!u)for(f=1,u=new Array(l-1);f<l;f++)u[f-1]=arguments[f];c[h].fn.apply(c[h].context,u)}}return!0},a.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,i,r){var s=n?n+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||r&&!a.once||i&&a.context!==i||o(this,s);else{for(var u=0,h=[],c=a.length;u<c;u++)(a[u].fn!==e||r&&!a[u].once||i&&a[u].context!==i)&&h.push(a[u]);h.length?this._events[s]=1===h.length?h[0]:h:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&o(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}({get exports(){return Yt},set exports(t){Yt=t}});var Zt=Yt;class Kt extends Error{constructor(t){super(t),this.name="TimeoutError"}}class te extends Error{constructor(t){super(),this.name="AbortError",this.message=t}}const ee=t=>void 0===globalThis.DOMException?new te(t):new DOMException(t),ne=t=>{const e=void 0===t.reason?ee("This operation was aborted."):t.reason;return e instanceof Error?e:ee(e)};var ie,re=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)};class se{constructor(){ie.set(this,[])}enqueue(t,e){const n={priority:(e={priority:0,...e}).priority,run:t};if(this.size&&re(this,ie,"f")[this.size-1].priority>=e.priority)return void re(this,ie,"f").push(n);const i=function(t,e,n){let i=0,r=t.length;for(;r>0;){const s=Math.trunc(r/2);let o=i+s;n(t[o],e)<=0?(i=++o,r-=s+1):r=s}return i}(re(this,ie,"f"),n,((t,e)=>e.priority-t.priority));re(this,ie,"f").splice(i,0,n)}dequeue(){const t=re(this,ie,"f").shift();return null==t?void 0:t.run}filter(t){return re(this,ie,"f").filter((e=>e.priority===t.priority)).map((t=>t.run))}get size(){return re(this,ie,"f").length}}ie=new WeakMap;var oe,ae,ue,he,ce,le,fe,de,pe,ve,me,_e,ge,be,we,ye,Ee,Ie,ke,Se,Re,Ae,Le,Te,Ce,qe,Oe=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n},Ne=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)};class Pe extends Error{}class Me extends Zt{constructor(t){var e,n,i,r;if(super(),oe.add(this),ae.set(this,void 0),ue.set(this,void 0),he.set(this,0),ce.set(this,void 0),le.set(this,void 0),fe.set(this,0),de.set(this,void 0),pe.set(this,void 0),ve.set(this,void 0),me.set(this,void 0),_e.set(this,0),ge.set(this,void 0),be.set(this,void 0),we.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"==typeof(t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:se,...t}).intervalCap&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(e=t.intervalCap)||void 0===e?void 0:e.toString())&&void 0!==n?n:""}\` (${typeof t.intervalCap})`);if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(r=null===(i=t.interval)||void 0===i?void 0:i.toString())&&void 0!==r?r:""}\` (${typeof t.interval})`);Oe(this,ae,t.carryoverConcurrencyCount,"f"),Oe(this,ue,t.intervalCap===Number.POSITIVE_INFINITY||0===t.interval,"f"),Oe(this,ce,t.intervalCap,"f"),Oe(this,le,t.interval,"f"),Oe(this,ve,new t.queueClass,"f"),Oe(this,me,t.queueClass,"f"),this.concurrency=t.concurrency,this.timeout=t.timeout,Oe(this,we,!0===t.throwOnTimeout,"f"),Oe(this,be,!1===t.autoStart,"f")}get concurrency(){return Ne(this,ge,"f")}set concurrency(t){if(!("number"==typeof t&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);Oe(this,ge,t,"f"),Ne(this,oe,"m",Te).call(this)}async add(t,e={}){return e={timeout:this.timeout,throwOnTimeout:Ne(this,we,"f"),...e},new Promise(((n,i)=>{Ne(this,ve,"f").enqueue((async()=>{var r,s,o;Oe(this,_e,(s=Ne(this,_e,"f"),++s),"f"),Oe(this,he,(o=Ne(this,he,"f"),++o),"f");try{if(null===(r=e.signal)||void 0===r?void 0:r.aborted)throw new Pe("The task was aborted.");let i=t({signal:e.signal});e.timeout&&(i=function(t,e,n,i){let r;const s=new Promise(((s,o)=>{if("number"!=typeof e||1!==Math.sign(e))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e!==Number.POSITIVE_INFINITY){if((i={customTimers:{setTimeout,clearTimeout},...i}).signal){const{signal:t}=i;t.aborted&&o(ne(t)),t.addEventListener("abort",(()=>{o(ne(t))}))}r=i.customTimers.setTimeout.call(void 0,(()=>{if("function"==typeof n){try{s(n())}catch(t){o(t)}return}const i=n instanceof Error?n:new Kt("string"==typeof n?n:`Promise timed out after ${e} milliseconds`);"function"==typeof t.cancel&&t.cancel(),o(i)}),e),(async()=>{try{s(await t)}catch(t){o(t)}finally{i.customTimers.clearTimeout.call(void 0,r)}})()}else s(t)}));return s.clear=()=>{clearTimeout(r),r=void 0},s}(Promise.resolve(i),e.timeout)),e.signal&&(i=Promise.race([i,Ne(this,oe,"m",Ce).call(this,e.signal)]));const s=await i;n(s),this.emit("completed",s)}catch(t){if(t instanceof Kt&&!e.throwOnTimeout)return void n();i(t),this.emit("error",t)}finally{Ne(this,oe,"m",Ie).call(this)}}),e),this.emit("add"),Ne(this,oe,"m",Re).call(this)}))}async addAll(t,e){return Promise.all(t.map((async t=>this.add(t,e))))}start(){return Ne(this,be,"f")?(Oe(this,be,!1,"f"),Ne(this,oe,"m",Te).call(this),this):this}pause(){Oe(this,be,!0,"f")}clear(){Oe(this,ve,new(Ne(this,me,"f")),"f")}async onEmpty(){0!==Ne(this,ve,"f").size&&await Ne(this,oe,"m",qe).call(this,"empty")}async onSizeLessThan(t){Ne(this,ve,"f").size<t||await Ne(this,oe,"m",qe).call(this,"next",(()=>Ne(this,ve,"f").size<t))}async onIdle(){0===Ne(this,_e,"f")&&0===Ne(this,ve,"f").size||await Ne(this,oe,"m",qe).call(this,"idle")}get size(){return Ne(this,ve,"f").size}sizeBy(t){return Ne(this,ve,"f").filter(t).length}get pending(){return Ne(this,_e,"f")}get isPaused(){return Ne(this,be,"f")}}function $e(){var t,e,n;const i=new URL(globalThis.location?location.href:"file://");if(globalThis.devvit??(globalThis.devvit={}),globalThis.devvit.debug)return;(t=globalThis.devvit).debug??(t.debug={});const r={blocks:void 0,emitSnapshots:void 0,emitState:void 0,realtime:void 0,runtime:void 0,surface:void 0,useAsync:void 0,payments:void 0,bootstrap:void 0,webView:void 0},s={};for(const t in r)s[t.toLowerCase()]=t;let o=[...i.searchParams].find((([t])=>"devvitdebug"===t.toLowerCase()))?.[1];if(null!=o){""===o&&(o=Object.keys(r).filter((t=>"emitSnapshots"!==t&&"emitState"!==t)).join());for(const t of o.split(",")??[]){let[i,r]=t.split("=");i&&(i.toLowerCase()in s?i=s[i.toLowerCase()]:console.warn(`[devvit] unknown devvitdebug parameter "${i}"`),(e=globalThis.devvit.debug)[n=i]??(e[n]=r||"true"),console.info(`[devvit] set devvitdebug ${i}=${globalThis.devvit.debug[i]}`))}}}ae=new WeakMap,ue=new WeakMap,he=new WeakMap,ce=new WeakMap,le=new WeakMap,fe=new WeakMap,de=new WeakMap,pe=new WeakMap,ve=new WeakMap,me=new WeakMap,_e=new WeakMap,ge=new WeakMap,be=new WeakMap,we=new WeakMap,oe=new WeakSet,ye=function(){return Ne(this,ue,"f")||Ne(this,he,"f")<Ne(this,ce,"f")},Ee=function(){return Ne(this,_e,"f")<Ne(this,ge,"f")},Ie=function(){var t;Oe(this,_e,(t=Ne(this,_e,"f"),--t),"f"),Ne(this,oe,"m",Re).call(this),this.emit("next")},ke=function(){Ne(this,oe,"m",Le).call(this),Ne(this,oe,"m",Ae).call(this),Oe(this,pe,void 0,"f")},Se=function(){const t=Date.now();if(void 0===Ne(this,de,"f")){const e=Ne(this,fe,"f")-t;if(!(e<0))return void 0===Ne(this,pe,"f")&&Oe(this,pe,setTimeout((()=>{Ne(this,oe,"m",ke).call(this)}),e),"f"),!0;Oe(this,he,Ne(this,ae,"f")?Ne(this,_e,"f"):0,"f")}return!1},Re=function(){if(0===Ne(this,ve,"f").size)return Ne(this,de,"f")&&clearInterval(Ne(this,de,"f")),Oe(this,de,void 0,"f"),this.emit("empty"),0===Ne(this,_e,"f")&&this.emit("idle"),!1;if(!Ne(this,be,"f")){const t=!Ne(this,oe,"a",Se);if(Ne(this,oe,"a",ye)&&Ne(this,oe,"a",Ee)){const e=Ne(this,ve,"f").dequeue();return!!e&&(this.emit("active"),e(),t&&Ne(this,oe,"m",Ae).call(this),!0)}}return!1},Ae=function(){Ne(this,ue,"f")||void 0!==Ne(this,de,"f")||(Oe(this,de,setInterval((()=>{Ne(this,oe,"m",Le).call(this)}),Ne(this,le,"f")),"f"),Oe(this,fe,Date.now()+Ne(this,le,"f"),"f"))},Le=function(){0===Ne(this,he,"f")&&0===Ne(this,_e,"f")&&Ne(this,de,"f")&&(clearInterval(Ne(this,de,"f")),Oe(this,de,void 0,"f")),Oe(this,he,Ne(this,ae,"f")?Ne(this,_e,"f"):0,"f"),Ne(this,oe,"m",Te).call(this)},Te=function(){for(;Ne(this,oe,"m",Re).call(this););},Ce=async function(t){return new Promise(((e,n)=>{t.addEventListener("abort",(()=>{n(new Pe("The task was aborted."))}),{once:!0})}))},qe=async function(t,e){return new Promise((n=>{const i=()=>{e&&!e()||(this.off(t,i),n())};this.on(t,i)}))};var De,xe,je,Ue,Be,We,Ve,ze,Fe,Ge,Xe,He,Je,Qe,Ye,Ze,Ke=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)},tn=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n};const en={width:288,height:320,scale:1,fontScale:1},nn=["showToast","showForm","navigateToUrl"];$e();class rn{constructor(){De.add(this),xe.set(this,void 0),this.dimensions=en,je.set(this,void 0),Ue.set(this,{}),Be.set(this,new Me({concurrency:1})),We.set(this,!1),Ve.set(this,void 0),ze.set(this,!1),Fe.set(this,!1),Ge.set(this,[]),Qe.set(this,((t,e,n,i,r)=>{this.onPluginCall?.(t,e,n,i,r),e===a.fullName&&n===a.methods.send.name&&this._local?.onPluginResponse(t,{error:void 0,success:!0,value:{}})}))}get appState(){return Ke(this,Ue,"f").__postData={thingId:this.postID,config:this.postConfig},Ke(this,Ue,"f")}async load(t){this.unload(),tn(this,je,t,"f");try{return await(this._local?.loadBundle(t))}catch(e){Ke(this,De,"m",Je).call(this,t,"Error",e)}}set meta(t){const e={...t},n=[];for(const[t,e]of Object.entries(devvit?.debug??{}))n.push(`${t}=${e}`);n.length&&(e[b.Debug]={values:n}),tn(this,xe,e,"f")}queueEvent(t){const e=Ke(this,je,"f");t.async?Ke(this,De,"m",Ye).call(this,e,t):Ke(this,Be,"f").add((()=>Ke(this,De,"m",Ye).call(this,e,t)))}queueRenderPost(t,e,n){const i=Ke(this,je,"f");Ke(this,Be,"f").add((()=>Ke(this,De,"m",Ze).call(this,i,t,e,n)))}get rendered(){return Ke(this,We,"f")}get pausedEffects(){return Ke(this,Ge,"f")}resetAppState(){tn(this,We,!1,"f"),tn(this,Ue,{},"f")}set runtimeDebugLogging(t){tn(this,ze,t,"f"),this._local&&(this._local.runtimeDebugLogging=t)}setLocalSrc(t){this.unload(),this._local=t?new Qt(t,((t,e)=>this.onError?.(t,e)),{callback:Ke(this,Qe,"f"),plugins:[]}):void 0,this._local&&(this._local.runtimeDebugLogging=Ke(this,ze,"f"))}unload(){tn(this,je,void 0,"f"),null!=Ke(this,Ve,"f")&&clearTimeout(Ke(this,Ve,"f")),Ke(this,Be,"f").clear(),this._local?.quit()}togglePause(t){if(!t&&Ke(this,Ge,"f").length>0){const t=Ke(this,Ge,"f");tn(this,Ge,[],"f"),t.forEach((({renderType:t,effects:e})=>{Ke(this,De,"m",He).call(this,t,e)}))}tn(this,Fe,t,"f")}}function sn(t,e,n,i){const r=i.match(/([a-zA-Z0-9-]+)\/(.*)/)??[];if(r.length<3)return"";const[s,o,a]=r;if(!e||!o||!a)return"";const u=e.replace(/^t[0-9]_/,""),h=t.replace("{{location}}",u).replace("{{app}}",o).replace("{{path}}",a);return new URL(h).toString()}xe=new WeakMap,je=new WeakMap,Ue=new WeakMap,Be=new WeakMap,We=new WeakMap,Ve=new WeakMap,ze=new WeakMap,Fe=new WeakMap,Ge=new WeakMap,Qe=new WeakMap,De=new WeakSet,Xe=function(t){devvit?.debug.runtime&&(tt(t)?console.debug("[runtime] try remote call; circuit break"):console.debug("[runtime] try remote call; local failed",t),this.remote||console.debug("[runtime] call failed; no remote"))},He=function(t,e){for(const n of e)n.rerenderUi?(null!=Ke(this,Ve,"f")&&clearTimeout(Ke(this,Ve,"f")),tn(this,Ve,setTimeout((()=>{this.queueRenderPost(u.RENDER_EFFECT_EVENT,"rerender-effect",{})}),1e3*(n.rerenderUi.delaySeconds??0)),"f")):(t!==u.RENDER_USER_ACTION||nn.some((t=>n[t])))&&this.onUserAction?.(n)},Je=function(t,e,n){t&&Ke(this,je,"f")!==t||this.onError?.(e,n)},Ye=async function(t,e){let n;const i={event:e,state:this.appState};if(this._local?.ready&&e.scope!==h.REMOTE)try{n=await this._local.call("HandleUIEvent",i,Ke(this,xe,"f"))}catch(e){tt(e)&&this.remote||Ke(this,De,"m",Je).call(this,t,"Error",e),Ke(this,De,"m",Xe).call(this,e)}else devvit?.debug.runtime&&console.debug("[runtime] try remote call; "+(e.scope===h.REMOTE?"local call forbidden":"local not ready"));if(!n&&e.scope!==h.LOCAL)try{n=await(this.remote?.HandleUIEvent(i,Ke(this,xe,"f")))}catch(e){Ke(this,De,"m",Je).call(this,t,"Error",e),devvit?.debug.runtime&&console.debug("[runtime] remote call failed",e)}if(n){e.async||tn(this,Ue,n.state??{},"f");const t=e.realtimeEvent?u.RENDER_EFFECT_EVENT:u.RENDER_USER_ACTION;Ke(this,Fe,"f")?Ke(this,Ge,"f").push({renderType:t,effects:n.effects}):Ke(this,De,"m",He).call(this,t,n.effects)}devvit?.debug.runtime&&(this._local?.ready||this.remote?this._local?.ready||e.scope!==h.LOCAL?this.remote||e.scope!==h.REMOTE||console.debug("[runtime] call failed; remote event but remote runtime is unavailable"):console.debug("[runtime] call failed; local event but local runtime is unavailable"):console.debug("[runtime] call failed; no runtimes"))},Ze=async function(t,e,n,i){const r={blocks:{type:e,id:n,data:i},state:this.appState,dimensions:this.dimensions};let s;if(this._local?.ready)try{s=await this._local.call("RenderPost",r,Ke(this,xe,"f"))}catch(e){tt(e)&&e.response&&(s=e.response),tt(e)&&this.remote||Ke(this,De,"m",Je).call(this,t,"Error",e),Ke(this,De,"m",Xe).call(this,e)}else devvit?.debug.runtime&&console.debug("[runtime] try remote call; local not ready");if(!s)try{s=await(this.remote?.RenderPost(r,Ke(this,xe,"f")))}catch(e){Ke(this,De,"m",Je).call(this,t,"Error",e),devvit?.debug.runtime&&console.debug("[runtime] remote call failed",e)}s&&(tn(this,We,!0,"f"),s.state&&tn(this,Ue,s.state,"f"),this.onRenderPost?.(r,s),Ke(this,Fe,"f")?Ke(this,Ge,"f").push({renderType:r.blocks.type,effects:s.effects}):Ke(this,De,"m",He).call(this,r.blocks.type,s.effects)),!devvit?.debug.runtime||this._local?.ready||this.remote||console.debug("[runtime] call failed; no runtimes")};var on,an,un,hn,cn,ln,fn,dn,pn,vn,mn,_n,gn=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},bn=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},wn=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)},yn=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n};let En=class extends t{static get styles(){return[c]}constructor(){super(),on.add(this),this.runtimeDebugLogging=!1,this.useExperimentalBlocks=!1,this.webViewUrlTemplate="",this.disableAssetSandbox=!1,an.set(this,new rn),un.set(this,void 0),hn.set(this,void 0),cn.set(this,void 0),ln.set(this,""),dn.set(this,(()=>({experimental:this.useExperimentalBlocks,resolveWebViewUrl:t=>this.disableAssetSandbox?t:sn(this.webViewUrlTemplate,this.metadata?.[b.Subreddit]?.values?.[0],wn(this,ln,"f"),t),onAction:t=>wn(this,an,"f").queueRenderPost(u.RENDER_USER_ACTION,t.id,t.data??{}),stackDirection:l.UNRECOGNIZED,disableAssetSandbox:this.disableAssetSandbox}))),pn.set(this,((t,e)=>{tt(e)||console.error(e),wn(this,on,"m",fn).call(this,"devvit-ui-error",{err:e,type:t})})),vn.set(this,((t,e,n,i,r)=>{e===a.fullName&&n===a.methods.send.name&&((devvit?.debug.surface||devvit?.debug.realtime)&&console.debug("[realtime][custom] realtime plugin call",i),wn(this,on,"m",fn).call(this,"devvit-realtime-send",{event:i}))})),mn.set(this,((t,e)=>{var n,i;this.renderResponse=e,this.renderResponse?.blocks?.ui&&(this._rootBlock=this.renderResponse.blocks.ui,wn(this,un,"f")?((n=this._rootBlock).config??(n.config={}),(i=this._rootBlock.config).rootConfig??(i.rootConfig={children:[],height:0}),this._rootBlock.config.rootConfig.height=wn(this,un,"f")):yn(this,un,this._rootBlock.config?.rootConfig?.height||z,"f"))})),_n.set(this,(t=>{devvit?.debug.surface&&console.debug("[custom] effect",t),wn(this,on,"m",fn).call(this,"devvit-ui-effect",{effect:t,onEvent:t=>wn(this,an,"f").queueEvent(t),metadata:this.metadata})})),devvit?.debug.surface&&console.debug("[custom] constructed"),wn(this,an,"f").onError=wn(this,pn,"f"),wn(this,an,"f").onPluginCall=wn(this,vn,"f"),wn(this,an,"f").onRenderPost=wn(this,mn,"f"),wn(this,an,"f").onUserAction=wn(this,_n,"f")}async connectedCallback(){super.connectedCallback(),devvit?.debug.surface&&console.debug("[custom] connected"),yn(this,hn,new ResizeObserver(et((t=>{0!==t.length&&(this.dimensions=st(t[0],window,document.body),devvit?.debug.surface&&console.debug("[custom] resized",this.dimensions))}),600)),"f"),wn(this,hn,"f").observe(this,{box:"content-box"}),yn(this,cn,new IntersectionObserver((t=>{t.forEach((t=>{devvit?.debug.surface&&console.debug(`[custom] ${t.isIntersecting?"":"not "}intersecting`),wn(this,an,"f").togglePause(!t.isIntersecting)}))})),"f"),wn(this,cn,"f").observe(this)}disconnectedCallback(){devvit?.debug.surface&&console.debug("[custom] disconnected"),wn(this,an,"f").unload(),wn(this,hn,"f")?.unobserve(this),wn(this,cn,"f")?.unobserve(this),super.disconnectedCallback()}render(){return this.renderResponse?e`<div class="relative"> <devvit-blocks-renderer class="${this.scheme??""}" .block="${this._rootBlock}" .renderContext="${wn(this,dn,"f")}"> <slot slot="empty-state-image" name="empty-state-image"></slot> </devvit-blocks-renderer> </div>`:e`<slot></slot>`}async willUpdate(t){if(wn(this,an,"f").meta=this.metadata,wn(this,an,"f").postConfig=this.postConfig,this.dimensions&&(wn(this,an,"f").dimensions=this.dimensions),t.has("postId")&&(wn(this,an,"f").postID=this.postId?rt(this.postId):void 0),t.has("runtimeDebugLogging")&&(wn(this,an,"f").runtimeDebugLogging=this.runtimeDebugLogging),t.has("remoteApp")&&(devvit?.debug.surface&&console.debug("[custom] remoteApp "+(this.remoteApp?"defined":"undefined")),wn(this,an,"f").remote=this.remoteApp),t.has("localRuntimeCode")&&(devvit?.debug.surface&&console.debug("[custom] local runtime "+(this.localRuntimeCode?"loading":"unloading")),wn(this,an,"f").setLocalSrc(this.localRuntimeCode)),t.has("bundle")&&this.bundle){devvit?.debug.surface&&console.debug("[custom] bundle loading");const e=await wn(this,an,"f").load(this.bundle);e&&(wn(this,on,"m",fn).call(this,F,{name:"init_runtime",duration:Math.round(e.metrics.init.end-e.metrics.init.start)}),e.metrics.loadBundle&&wn(this,on,"m",fn).call(this,F,{name:"load_full_bundle",duration:Math.round(e.metrics.loadBundle.end-e.metrics.loadBundle.start)})),devvit?.debug.surface&&console.debug("[custom] bundle loaded"),yn(this,ln,this.bundle.actor?.version??"","f"),t.get("bundle")&&((devvit?.debug.surface||devvit?.debug.runtime)&&console.debug("[runtime][custom] reset runtime state"),this.renderResponse=void 0,wn(this,an,"f").resetAppState(),yn(this,un,void 0,"f"))}this.dimensions&&(wn(this,an,"f").rendered?(t.has("dimensions")||t.has("bundle"))&&(devvit?.debug.surface&&console.debug("[custom] dimensions / bundle render"),wn(this,an,"f").queueRenderPost(u.RENDER_USER_ACTION,void 0,{})):(devvit?.debug.surface&&console.debug("[custom] initial render"),wn(this,an,"f").queueRenderPost(u.RENDER_INITIAL,void 0,{})))}};an=new WeakMap,un=new WeakMap,hn=new WeakMap,cn=new WeakMap,ln=new WeakMap,dn=new WeakMap,pn=new WeakMap,vn=new WeakMap,mn=new WeakMap,_n=new WeakMap,on=new WeakSet,fn=function(t,e){this.dispatchEvent(q(t,e))},gn([A({attribute:!1}),bn("design:type",Object)],En.prototype,"remoteApp",void 0),gn([A({attribute:!1}),bn("design:type",Object)],En.prototype,"bundle",void 0),gn([A({attribute:!1}),bn("design:type",Object)],En.prototype,"localRuntimeCode",void 0),gn([A({attribute:!1}),bn("design:type",Object)],En.prototype,"metadata",void 0),gn([A({attribute:!1}),bn("design:type",Object)],En.prototype,"postConfig",void 0),gn([A({attribute:"post-id"}),bn("design:type",Object)],En.prototype,"postId",void 0),gn([A({attribute:"runtime-debug-logging",type:Boolean}),bn("design:type",Boolean)],En.prototype,"runtimeDebugLogging",void 0),gn([A({attribute:"scheme"}),bn("design:type",Object)],En.prototype,"scheme",void 0),gn([A({attribute:"use-experimental-blocks",type:Boolean}),bn("design:type",Boolean)],En.prototype,"useExperimentalBlocks",void 0),gn([A({type:String}),bn("design:type",String)],En.prototype,"webViewUrlTemplate",void 0),gn([A({attribute:"disable-asset-sandbox",type:Boolean}),bn("design:type",Boolean)],En.prototype,"disableAssetSandbox",void 0),gn([L(),bn("design:type",Object)],En.prototype,"renderResponse",void 0),gn([L(),bn("design:type",Object)],En.prototype,"dimensions",void 0),gn([T("devvit-blocks-renderer"),bn("design:type",V)],En.prototype,"_blocksRenderer",void 0),gn([L(),bn("design:type",Object)],En.prototype,"_rootBlock",void 0),En=gn([C("devvit-custom-post"),bn("design:paramtypes",[])],En);var In="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var kn={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Sn={};!function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=kn,s=In,o=(e=t.exports={}).re=[],a=e.safeRe=[],u=e.src=[],h=e.t={};let c=0;const l="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",r],[l,i]],d=(t,e,n)=>{const i=(t=>{for(const[e,n]of f)t=t.split(`${e}*`).join(`${e}{0,${n}}`).split(`${e}+`).join(`${e}{1,${n}}`);return t})(e),r=c++;s(t,r,e),h[t]=r,u[r]=e,o[r]=new RegExp(e,n?"g":void 0),a[r]=new RegExp(i,n?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","\\d+"),d("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),d("MAINVERSION",`(${u[h.NUMERICIDENTIFIER]})\\.(${u[h.NUMERICIDENTIFIER]})\\.(${u[h.NUMERICIDENTIFIER]})`),d("MAINVERSIONLOOSE",`(${u[h.NUMERICIDENTIFIERLOOSE]})\\.(${u[h.NUMERICIDENTIFIERLOOSE]})\\.(${u[h.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASEIDENTIFIER",`(?:${u[h.NUMERICIDENTIFIER]}|${u[h.NONNUMERICIDENTIFIER]})`),d("PRERELEASEIDENTIFIERLOOSE",`(?:${u[h.NUMERICIDENTIFIERLOOSE]}|${u[h.NONNUMERICIDENTIFIER]})`),d("PRERELEASE",`(?:-(${u[h.PRERELEASEIDENTIFIER]}(?:\\.${u[h.PRERELEASEIDENTIFIER]})*))`),d("PRERELEASELOOSE",`(?:-?(${u[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[h.PRERELEASEIDENTIFIERLOOSE]})*))`),d("BUILDIDENTIFIER","[a-zA-Z0-9-]+"),d("BUILD",`(?:\\+(${u[h.BUILDIDENTIFIER]}(?:\\.${u[h.BUILDIDENTIFIER]})*))`),d("FULLPLAIN",`v?${u[h.MAINVERSION]}${u[h.PRERELEASE]}?${u[h.BUILD]}?`),d("FULL",`^${u[h.FULLPLAIN]}$`),d("LOOSEPLAIN",`[v=\\s]*${u[h.MAINVERSIONLOOSE]}${u[h.PRERELEASELOOSE]}?${u[h.BUILD]}?`),d("LOOSE",`^${u[h.LOOSEPLAIN]}$`),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE",`${u[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),d("XRANGEIDENTIFIER",`${u[h.NUMERICIDENTIFIER]}|x|X|\\*`),d("XRANGEPLAIN",`[v=\\s]*(${u[h.XRANGEIDENTIFIER]})(?:\\.(${u[h.XRANGEIDENTIFIER]})(?:\\.(${u[h.XRANGEIDENTIFIER]})(?:${u[h.PRERELEASE]})?${u[h.BUILD]}?)?)?`),d("XRANGEPLAINLOOSE",`[v=\\s]*(${u[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[h.XRANGEIDENTIFIERLOOSE]})(?:${u[h.PRERELEASELOOSE]})?${u[h.BUILD]}?)?)?`),d("XRANGE",`^${u[h.GTLT]}\\s*${u[h.XRANGEPLAIN]}$`),d("XRANGELOOSE",`^${u[h.GTLT]}\\s*${u[h.XRANGEPLAINLOOSE]}$`),d("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),d("COERCE",`${u[h.COERCEPLAIN]}(?:$|[^\\d])`),d("COERCEFULL",u[h.COERCEPLAIN]+`(?:${u[h.PRERELEASE]})?`+`(?:${u[h.BUILD]})?(?:$|[^\\d])`),d("COERCERTL",u[h.COERCE],!0),d("COERCERTLFULL",u[h.COERCEFULL],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM",`(\\s*)${u[h.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",d("TILDE",`^${u[h.LONETILDE]}${u[h.XRANGEPLAIN]}$`),d("TILDELOOSE",`^${u[h.LONETILDE]}${u[h.XRANGEPLAINLOOSE]}$`),d("LONECARET","(?:\\^)"),d("CARETTRIM",`(\\s*)${u[h.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",d("CARET",`^${u[h.LONECARET]}${u[h.XRANGEPLAIN]}$`),d("CARETLOOSE",`^${u[h.LONECARET]}${u[h.XRANGEPLAINLOOSE]}$`),d("COMPARATORLOOSE",`^${u[h.GTLT]}\\s*(${u[h.LOOSEPLAIN]})$|^$`),d("COMPARATOR",`^${u[h.GTLT]}\\s*(${u[h.FULLPLAIN]})$|^$`),d("COMPARATORTRIM",`(\\s*)${u[h.GTLT]}\\s*(${u[h.LOOSEPLAIN]}|${u[h.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE",`^\\s*(${u[h.XRANGEPLAIN]})\\s+-\\s+(${u[h.XRANGEPLAIN]})\\s*$`),d("HYPHENRANGELOOSE",`^\\s*(${u[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[h.XRANGEPLAINLOOSE]})\\s*$`),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}({get exports(){return Sn},set exports(t){Sn=t}},Sn);const Rn=Object.freeze({loose:!0}),An=Object.freeze({});var Ln=t=>t?"object"!=typeof t?Rn:t:An;const Tn=/^[0-9]+$/,Cn=(t,e)=>{const n=Tn.test(t),i=Tn.test(e);return n&&i&&(t=+t,e=+e),t===e?0:n&&!i?-1:i&&!n?1:t<e?-1:1};var qn={compareIdentifiers:Cn,rcompareIdentifiers:(t,e)=>Cn(e,t)};const On=In,{MAX_LENGTH:Nn,MAX_SAFE_INTEGER:Pn}=kn,{safeRe:Mn,t:$n}=Sn,Dn=Ln,{compareIdentifiers:xn}=qn;class jn{constructor(t,e){if(e=Dn(e),t instanceof jn){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Nn)throw new TypeError(`version is longer than ${Nn} characters`);On("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const n=t.trim().match(e.loose?Mn[$n.LOOSE]:Mn[$n.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Pn||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Pn||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Pn||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((t=>{if(/^[0-9]+$/.test(t)){const e=+t;if(e>=0&&e<Pn)return e}return t})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(On("SemVer.compare",this.version,this.options,t),!(t instanceof jn)){if("string"==typeof t&&t===this.version)return 0;t=new jn(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof jn||(t=new jn(t,this.options)),xn(this.major,t.major)||xn(this.minor,t.minor)||xn(this.patch,t.patch)}comparePre(t){if(t instanceof jn||(t=new jn(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{const n=this.prerelease[e],i=t.prerelease[e];if(On("prerelease compare",e,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return xn(n,i)}while(++e)}compareBuild(t){t instanceof jn||(t=new jn(t,this.options));let e=0;do{const n=this.build[e],i=t.build[e];if(On("build compare",e,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return xn(n,i)}while(++e)}inc(t,e,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,n),this.inc("pre",e,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e,n),this.inc("pre",e,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const t=Number(n)?1:0;if(!e&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[t];else{let i=this.prerelease.length;for(;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);if(-1===i){if(e===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(t)}}if(e){let i=[e,t];!1===n&&(i=[e]),0===xn(this.prerelease[0],e)?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}const Un=jn;const Bn=(t,e,n)=>new Un(t,n).compare(new Un(e,n));var Wn=(t,e,n)=>Bn(t,e,n)<0;const Vn=jn;const zn=(t,e,n=!1)=>{if(t instanceof Vn)return t;try{return new Vn(t,e)}catch(t){if(!n)return null;throw t}};var Fn,Gn,Xn=(t,e)=>{const n=zn(t,e);return n?n.version:null};void 0===ArrayBuffer.isView&&(ArrayBuffer.isView=function(t){return null!=t&&null!=t.__proto__&&t.__proto__.__proto__===Int8Array.prototype.__proto__}),void 0===Array.prototype.fill&&Object.defineProperty(Array.prototype,"fill",{value:function(t){if(null==this)throw new TypeError("this is null or not defined");for(var e=Object(this),n=e.length>>>0,i=arguments[1],r=i>>0,s=r<0?Math.max(n+r,0):Math.min(r,n),o=arguments[2],a=void 0===o?n:o>>0,u=a<0?Math.max(n+a,0):Math.min(a,n);s<u;)e[s]=t,s++;return e}}),[Int8Array,Int16Array,Uint16Array,Int32Array,Float32Array,Float64Array].forEach((function(t){void 0===t.prototype.fill&&Object.defineProperty(t.prototype,"fill",{value:Array.prototype.fill})})),void 0===Math.clz32&&(Math.clz32=(Fn=Math.log,Gn=Math.LN2,function(t){var e=t>>>0;return 0===e?32:31-(Fn(e)/Gn|0)|0})),void 0===Math.imul&&(Math.imul=function(t,e){return(4294901760&t)*(65535&e)+(65535&t)*(0|e)|0});var Hn,Jn,Qn,Yn,Zn,Kn,ti,ei,ni,ii,ri,si,oi,ai,ui,hi,ci,li,fi,di,pi,vi,mi,_i,gi,bi,wi,yi,Ei,Ii=Math.clz32,ki=ArrayBuffer.isView,Si=Math.imul;function Ri(){}function Ai(){}function Li(){}function Ti(){this.MIN_VALUE=-2147483648,this.MAX_VALUE=2147483647,this.SIZE_BYTES=4,this.SIZE_BITS=32}function Ci(t){return function(t){if(t.t())return[];var e=t.q(),n=Fr(Array(e),null),i=t.l(),r=0;for(;i.m();){var s=r;r=s+1|0,n[s]=i.o()}return n}(t)}function qi(t){return 0===(e=[t]).length?Fi():Xi(new Zo(e,!0));var e}function Oi(t){return void 0!==t.toArray?t.toArray():Ci(t)}function Ni(t,e,n,i,r){mi.h(i,r,t.length);var s=r-i|0;if(mi.h(n,n+s|0,e.length),ki(e)&&ki(t)){var o=t.subarray(i,r);e.set(o,n)}else if(t!==e||n<=i){var a=0;if(a<s)do{var u=a;a=a+1|0,e[n+u|0]=t[i+u|0]}while(a<s)}else{var h=s-1|0;if(0<=h)do{var c=h;h=h+-1|0,e[n+c|0]=t[i+c|0]}while(0<=h)}}function Pi(t){return t<0&&function(){throw So("Index overflow has happened.")}(),t}function Mi(){No.call(this)}function $i(t){this.w_1=t,this.u_1=0,this.v_1=-1}function Di(){Mi.call(this),this.y_1=0}function xi(){Do.call(this),this.g1_1=null,this.h1_1=null}function ji(){Mi.call(this)}function Ui(t){if(!(t>=0)){throw ao(as("capacity must be non-negative."))}return Fr(Array(t),null)}function Bi(t,e){t[e]=null}function Wi(t,e,n){t.fill(null,e,n)}function Vi(t,e){return function(t,e){if(!(e>=0)){throw ao(as("Invalid new array size: "+e+"."))}return function(t,e,n){var i=t.slice(0,e);void 0!==t.$type$&&(i.$type$=t.$type$);var r=t.length;if(e>r)for(i.length=e;r<e;){var s=r;r=s+1|0,i[s]=n}return i}(t,e,null)}(t,e)}function zi(){Qn=this;var t=Gi(0);t.w1_1=!0,this.x1_1=t}function Fi(){return t=ps(fs(Ji)),Ji.call(t,[]),t;var t}function Gi(t){return function(t,e){if(Ji.call(e,[]),!(t>=0))throw ao(as("Negative initial capacity: "+t));return e}(t,ps(fs(Ji)))}function Xi(t){return function(t,e){var n=Oi(t);return Ji.call(e,n),e}(t,ps(fs(Ji)))}function Hi(t,e){return mi.y1(e,t.q()),e}function Ji(t){null==Qn&&new zi,Di.call(this),this.v1_1=t,this.w1_1=!1}function Qi(t){return function(t,e){xi.call(e),Yi.call(e),e.f2_1=t}(ir(),t),t}function Yi(){this.g2_1=null}function Zi(t){Ki.call(this,t)}function Ki(t){ji.call(this),this.j2_1=t}function tr(t,e){return function(t){var e;e=0===t?0:1<<(31-Ii(t)|0);return e}(Si(Cr(e,1),3))}function er(t,e){return Ii(e)+1|0}function nr(t){return function(t,e){_r.call(e,Ui(t),null,new Int32Array(t),new Int32Array(tr(0,t)),2,0)}(8,t),t}function ir(){return nr(ps(fs(_r)))}function rr(t){return t.p2_1.length}function sr(t){return t.s2_1.length}function or(t){t.w2_1=t.w2_1+1|0}function ar(t,e){!function(t,e){var n=rr(t)-t.u2_1|0,i=t.u2_1-t.q()|0;return n<e&&(i+n|0)>=e&&i>=(rr(t)/4|0)}(t,e)?function(t,e){if(e<0)throw go("too many elements");if(e>rr(t)){var n=mi.z2(rr(t),e);t.p2_1=Vi(t.p2_1,n);var i=t,r=t.q2_1;i.q2_1=null==r?null:Vi(r,n),t.r2_1=function(t,e){if(!(e>=0)){throw ao(as("Invalid new array size: "+e+"."))}return function(t,e){var n=t.length,i=e.length,r=0,s=e;for(;r<n&&r<i;){var o=r,a=r;r=a+1|0,s[o]=t[a]}return e}(t,new Int32Array(e))}(t.r2_1,n);var s=tr(0,n);s>sr(t)&&hr(t,s)}}(t,t.u2_1+e|0):hr(t,sr(t))}function ur(t,e){return null==e?0:Si(us(e),-1640531527)>>>t.v2_1|0}function hr(t,e){var n,i,r,s;or(t),t.u2_1>t.x2_1&&function(t){for(var e=0,n=0,i=t.q2_1;e<t.u2_1;)t.r2_1[e]>=0&&(t.p2_1[n]=t.p2_1[e],null!=i&&(i[n]=i[e]),n=n+1|0),e=e+1|0;Wi(t.p2_1,n,t.u2_1),null==i||Wi(i,n,t.u2_1),t.u2_1=n}(t),e!==sr(t)?(t.s2_1=new Int32Array(e),t.v2_1=er(0,e)):(n=t.s2_1,i=0,r=0,s=sr(t),r=r===vi?0:r,s=s===vi?n.length:s,mi.h(r,s,n.length),n.fill(i,r,s));for(var o=0;o<t.u2_1;){var a=o;if(o=a+1|0,!cr(t,a))throw lo("This cannot happen with fixed magic multiplier and grow-only hash array. Have object hashCodes changed?")}}function cr(t,e){for(var n=ur(t,t.p2_1[e]),i=t.t2_1;;){if(0===t.s2_1[n])return t.s2_1[n]=e+1|0,t.r2_1[e]=n,!0;if((i=i-1|0)<0)return!1;var r=n;n=r-1|0,0===r&&(n=sr(t)-1|0)}}function lr(t,e){for(var n=ur(t,e),i=t.t2_1;;){var r=t.s2_1[n];if(0===r)return-1;if(r>0&&cs(t.p2_1[r-1|0],e))return r-1|0;if((i=i-1|0)<0)return-1;var s=n;n=s-1|0,0===s&&(n=sr(t)-1|0)}}function fr(t,e){Bi(t.p2_1,e),function(t,e){var n=e,i=e,r=0,s=qr(Si(t.t2_1,2),sr(t)/2|0);for(;;){var o=n;if(n=o-1|0,0===o&&(n=sr(t)-1|0),(r=r+1|0)>t.t2_1)return t.s2_1[i]=0,Hn;var a=t.s2_1[n];if(0===a)return t.s2_1[i]=0,Hn;if(a<0)t.s2_1[i]=-1,i=n,r=0;else((ur(t,t.p2_1[a-1|0])-n|0)&(sr(t)-1|0))>=r&&(t.s2_1[i]=a,t.r2_1[a-1|0]=i,i=n,r=0);if((s=s-1|0)<0)return t.s2_1[i]=-1,Hn}}(t,t.r2_1[e]),t.r2_1[e]=-1,t.x2_1=t.x2_1-1|0,or(t)}function dr(){this.a3_1=-1640531527,this.b3_1=8,this.c3_1=2,this.d3_1=-1}function pr(t){this.e3_1=t,this.f3_1=0,this.g3_1=-1,this.h3_1=this.e3_1.w2_1,this.i3()}function vr(t){pr.call(this,t)}function mr(t,e){this.u3_1=t,this.v3_1=e}function _r(t,e,n,i,r,s){this.p2_1=t,this.q2_1=e,this.r2_1=n,this.s2_1=i,this.t2_1=r,this.u2_1=s,this.v2_1=er(0,sr(this)),this.w2_1=0,this.x2_1=0,this.y2_1=!1}function gr(){}function br(){return Qi(t=ps(fs(wr))),wr.call(t),t;var t}function wr(){}function yr(t){return Ir.call(t,""),t}function Er(){return yr(ps(fs(Ir)))}function Ir(t){this.q3_1=void 0!==t?t:""}function kr(t){var e=Or(t).toUpperCase();return e.length>1?t:Kr(e,0)}function Sr(t,e,n,i,r,s){return da(t,e,n,i,r,s=s!==vi&&s)}function Rr(t){switch(t.length){case 0:return Ho();case 1:return qi(t[0]);default:return function(t){return Xi(function(t){return new Zo(t,!1)}(t))}(t)}}function Ar(t){return t.length-1|0}function Lr(t,e){if(null==e){var n=0,i=t.length-1|0;if(n<=i)do{var r=n;if(n=n+1|0,null==t[r])return r}while(n<=i)}else{var s=0,o=t.length-1|0;if(s<=o)do{var a=s;if(s=s+1|0,cs(e,t[a]))return a}while(s<=o)}return-1}function Tr(t,e,n,i,r,s,o){return e=e===vi?", ":e,n=n===vi?"":n,i=i===vi?"":i,r=r===vi?-1:r,s=s===vi?"...":s,o=o===vi?null:o,function(t,e,n,i,r,s,o,a){n=n===vi?", ":n,i=i===vi?"":i,r=r===vi?"":r,s=s===vi?-1:s,o=o===vi?"...":o,a=a===vi?null:a,e.d4(i);var u=0,h=t.l();t:for(;h.m();){var c=h.o();if((u=u+1|0)>1&&e.d4(n),!(s<0||u<=s))break t;ua(e,c,a)}s>=0&&u>s&&e.d4(o);return e.d4(r),e}(t,Er(),e,n,i,r,s,o).toString()}function Cr(t,e){return t<e?e:t}function qr(t,e){return t>e?e:t}function Or(t){return String.fromCharCode(t)}function Nr(){Yn=this,this.f4_1=0,this.g4_1=65535,this.h4_1=55296,this.i4_1=56319,this.j4_1=56320,this.k4_1=57343,this.l4_1=55296,this.m4_1=57343,this.n4_1=2,this.o4_1=16}function Pr(){return null==Yn&&new Nr,Yn}function Mr(){}function $r(){}function Dr(){}function xr(){}function jr(){}function Ur(){}function Br(t,e){this.p4_1=t,this.q4_1=e}function Wr(t){var e=null==t?null:as(t);return null==e?"null":e}function Vr(t){for(var e=1,n=[],i=0,r=t.length;i<r;){var s=t[i];i=i+1|0;var o=e,a=s.prototype.$imask$,u=null==a?s.$imask$:a;null!=u&&(n.push(u),o=u.length);var h=s.$metadata$.iid,c=null==h?null:zr(h);null!=c&&(n.push(c),o=Math.max(o,c.length)),o>e&&(e=o)}return function(t,e){var n=0,i=new Int32Array(t);for(;n<t;){for(var r=n,s=0,o=0,a=e.length;o<a;){var u=e[o];o=o+1|0,r<u.length&&(s|=u[r])}i[r]=s,n=n+1|0}return i}(e,n)}function zr(t){var e=t>>5,n=new Int32Array(e+1|0),i=1<<(31&t);return n[e]=n[e]|i,n}function Fr(t,e){var n=0,i=t.length-1|0;if(n<=i)do{var r=n;n=n+1|0,t[r]=e}while(r!==i);return t}function Gr(t){this.w4_1=t,this.v4_1=0}function Xr(){return Zr(),Zn}function Hr(){return Zr(),Kn}function Jr(){return Zr(),ti}function Qr(){return Zr(),ei}function Yr(t){return Zr(),(0|t)===t?Qs(t):(Hr()[0]=t,Si(Jr()[(Zr(),ni)],31)+Jr()[Qr()]|0)}function Zr(){ii||(ii=!0,Zn=new ArrayBuffer(8),Kn=new Float64Array(Xr()),new Float32Array(Xr()),ti=new Int32Array(Xr()),Hr()[0]=-1,ei=0!==Jr()[0]?1:0,ni=1-Qr()|0)}function Kr(t,e){var n;if(ts(t)){var i,r=t.charCodeAt(e);Pr();if(r<0)i=!0;else{Pr();i=r>65535}if(i)throw ao("Invalid Char code: "+r);n=function(t){return function(t){return 65535&t}(function(t){return t<<16>>16}(Qs(t)))}(r)}else n=t.b(e);return n}function ts(t){return"string"==typeof t}function es(t){return ts(t)?t.length:t.a()}function ns(t){return as(t)}function is(t,e){var n;if(t<e)n=-1;else if(t>e)n=1;else if(t===e){var i;if(0!==t)i=0;else{var r=1/t;i=r===1/e?0:r<0?-1:1}n=i}else n=t!=t?e!=e?0:1:-1;return n}function rs(t,e){return t<e?-1:t>e?1:0}function ss(t){if(!("kotlinHashCodeValue$"in t)){var e=os(),n=new Object;n.value=e,n.enumerable=!1,Object.defineProperty(t,"kotlinHashCodeValue$",n)}return t.kotlinHashCodeValue$}function os(){return 4294967296*Math.random()|0}function as(t){return null==t?"null":function(t){return!!Ys(t)||ki(t)}(t)?"[...]":"function"!=typeof t.toString?function(t){return Object.prototype.toString.call(t)}(t):t.toString()}function us(t){if(null==t)return 0;var e,n=typeof t;switch(n){case"object":e="function"==typeof t.hashCode?t.hashCode():ss(t);break;case"function":e=ss(t);break;case"number":e=Yr(t);break;case"boolean":e=t?1231:1237;break;case"string":e=hs(String(t));break;case"bigint":e=function(t){var e=BigInt(32),n=BigInt(4294967295),i=t<0?-t:t,r=0,s=t<0?-1:1;for(;0!=i;){var o=Number(i&n);r=Si(31,r)+o|0,i>>=e}return Si(r,s)}(t);break;case"symbol":e=function(t){var e=(i=t,Symbol.keyFor(i)!=vi?function(){ri===vi&&(ri=new Map);return ri}():function(){si===vi&&(si=new WeakMap);return si}()),n=e.get(t);var i;if(n!==vi)return n;var r=os();return e.set(t,r),r}(t);break;default:e=function(){throw new Error("Unexpected typeof `"+n+"`")}()}return e}function hs(t){var e=0,n=0,i=t.length-1|0;if(n<=i)do{var r=n;n=n+1|0;var s=t.charCodeAt(r);e=Si(e,31)+s|0}while(r!==i);return e}function cs(t,e){if(null==t)return null==e;if(null==e)return!1;if("object"==typeof t&&"function"==typeof t.equals)return t.equals(e);if(t!=t)return e!=e;if("number"==typeof t&&"number"==typeof e){var n;if(t===e){var i;if(0!==t)i=!0;else i=1/t===1/e;n=i}else n=!1;return n}return t===e}function ls(t,e){null!=Error.captureStackTrace?Error.captureStackTrace(t,e):t.stack=(new Error).stack}function fs(t){return t.prototype}function ds(t,e,n,i){return Object.defineProperty(t,e,{configurable:!0,get:n,set:i})}function ps(t){return Object.create(t)}function vs(t,e,n){Error.call(t),function(t,e,n){var i=to(Object.getPrototypeOf(t));if(0==(1&i)){var r;if(null==e){var s;if(null!==e){var o=null==n?null:n.toString();s=null==o?vi:o}else s=vi;r=s}else r=e;t.message=r}0==(2&i)&&(t.cause=n);t.name=Object.getPrototypeOf(t).constructor.name}(t,e,n)}function ms(t){var e;return null==t?function(){throw Ao()}():e=t,e}function _s(){throw To()}function gs(t){throw qo("lateinit property "+t+" has not been initialized")}function bs(t){throw ao(t)}function ws(){oi=this,this.a5_1=new ys(0,-2147483648),this.b5_1=new ys(-1,2147483647),this.c5_1=8,this.d5_1=64}function ys(t,e){null==oi&&new ws,Ai.call(this),this.x4_1=t,this.y4_1=e}function Es(){return Vs(),ai}function Is(){return Vs(),ui}function ks(){return Vs(),hi}function Ss(){return Vs(),li}function Rs(){return Vs(),fi}function As(t,e){if(Vs(),Os(t,e))return 0;var n=Ms(t),i=Ms(e);return n&&!i?-1:!n&&i?1:Ms(Ts(t,e))?-1:1}function Ls(t,e){Vs();var n=t.y4_1>>>16|0,i=65535&t.y4_1,r=t.x4_1>>>16|0,s=65535&t.x4_1,o=e.y4_1>>>16|0,a=65535&e.y4_1,u=e.x4_1>>>16|0,h=0,c=0,l=0,f=0;return h=(h=h+((c=(c=c+((l=(l=l+((f=f+(s+(65535&e.x4_1)|0)|0)>>>16|0)|0)+(r+u|0)|0)>>>16|0)|0)+(i+a|0)|0)>>>16|0)|0)+(n+o|0)|0,new ys((l&=65535)<<16|(f&=65535),(h&=65535)<<16|(c&=65535))}function Ts(t,e){return Vs(),Ls(t,e.i5())}function Cs(t,e){if(Vs(),$s(t))return Es();if($s(e))return Es();if(Os(t,Ss()))return Ds(e)?Ss():Es();if(Os(e,Ss()))return Ds(t)?Ss():Es();if(Ms(t))return Ms(e)?Cs(xs(t),xs(e)):xs(Cs(xs(t),e));if(Ms(e))return xs(Cs(t,xs(e)));if(js(t,Rs())&&js(e,Rs()))return Us(qs(t)*qs(e));var n=t.y4_1>>>16|0,i=65535&t.y4_1,r=t.x4_1>>>16|0,s=65535&t.x4_1,o=e.y4_1>>>16|0,a=65535&e.y4_1,u=e.x4_1>>>16|0,h=65535&e.x4_1,c=0,l=0,f=0,d=0;return f=f+((d=d+Si(s,h)|0)>>>16|0)|0,d&=65535,l=(l=l+((f=f+Si(r,h)|0)>>>16|0)|0)+((f=(f&=65535)+Si(s,u)|0)>>>16|0)|0,f&=65535,c=(c=(c=c+((l=l+Si(i,h)|0)>>>16|0)|0)+((l=(l&=65535)+Si(r,u)|0)>>>16|0)|0)+((l=(l&=65535)+Si(s,a)|0)>>>16|0)|0,l&=65535,c=c+(((Si(n,h)+Si(i,u)|0)+Si(r,a)|0)+Si(s,o)|0)|0,new ys(f<<16|d,(c&=65535)<<16|l)}function qs(t){return Vs(),4294967296*t.y4_1+function(t){return Vs(),t.x4_1>=0?t.x4_1:4294967296+t.x4_1}(t)}function Os(t,e){return Vs(),t.y4_1===e.y4_1&&t.x4_1===e.x4_1}function Ns(t,e){if(Vs(),e<2||36<e)throw so("radix out of range: "+e);if($s(t))return"0";if(Ms(t)){if(Os(t,Ss())){var n=Ps(e),i=t.h5(n),r=Ts(Cs(i,n),t).k5();return Ns(i,e)+r.toString(e)}return"-"+Ns(xs(t),e)}for(var s=2===e?31:e<=10?9:e<=21?7:e<=35?6:5,o=Us(Math.pow(e,s)),a=t,u="";;){var h=a.h5(o),c=Ts(a,Cs(h,o)).k5().toString(e);if($s(a=h))return c+u;for(;c.length<s;)c="0"+c;u=c+u}}function Ps(t){return Vs(),new ys(t,t<0?-1:0)}function Ms(t){return Vs(),t.y4_1<0}function $s(t){return Vs(),0===t.y4_1&&0===t.x4_1}function Ds(t){return Vs(),1==(1&t.x4_1)}function xs(t){return Vs(),t.i5()}function js(t,e){return Vs(),As(t,e)<0}function Us(t){if(Vs(),(e=t)!=e)return Es();if(t<=-0x8000000000000000)return Ss();if(t+1>=0x8000000000000000)return Vs(),ci;if(t<0)return xs(Us(-t));var e,n=4294967296;return new ys(t%n|0,t/n|0)}function Bs(t,e){return Vs(),As(t,e)>0}function Ws(t,e){return Vs(),As(t,e)>=0}function Vs(){di||(di=!0,ai=Ps(0),ui=Ps(1),hi=Ps(-1),ci=new ys(-1,2147483647),li=new ys(0,-2147483648),fi=Ps(16777216))}function zs(t,e,n,i,r){return Fs("class",t,e,n,i,r,null)}function Fs(t,e,n,i,r,s,o){return{kind:t,simpleName:e,associatedObjectKey:i,associatedObjects:r,suspendArity:s,$kClass$:undefined,defaultConstructor:n,iid:o}}function Gs(t,e,n,i,r,s,o,a,u){null!=i&&(t.prototype=Object.create(i.prototype),t.prototype.constructor=t);var h=n(e,s,o,a,null==u?[]:u);(t.$metadata$=h,null!=r)&&((null!=h.iid?t:t.prototype).$imask$=Vr(r))}function Xs(t,e,n,i,r){return Fs("interface",t,e,n,i,r,function(){pi===vi&&(pi=0);return pi=pi+1|0}())}function Hs(t,e,n,i,r){return Fs("object",t,e,n,i,r,null)}function Js(t){var e=t.length,n=Array(e),i=0,r=e-1|0;if(i<=r)do{var s=i;i=i+1|0;var o=t[s];null!=o&&Ks(o)?n[s]=o:n[s]=[].slice.call(o)}while(s!==r);return[].concat.apply([],n)}function Qs(t){return t instanceof ys?t.k5():function(t){var e;e=t>2147483647?2147483647:t<-2147483648?-2147483648:0|t;return e}(t)}function Ys(t){return Array.isArray(t)}function Zs(t,e){return function(t,e){var n,i=t.$imask$;if(null==i)return!1;n=i;return function(t,e){var n=e>>5;if(n>t.length)return!1;var i=1<<(31&e);return!(0==(t[n]&i))}(n,e)}(t,e.$metadata$.iid)}function Ks(t){return!!Ys(t)&&!t.$type$}function to(t){var e=t.constructor,n=null==e?null:e.$metadata$,i=null==n?null:n.errorInfo;if(null!=i)return i;var r,s=0;if(eo(t,"message")&&(s|=1),eo(t,"cause")&&(s|=2),3!==s){var o=(r=t,Object.getPrototypeOf(r));o!=Error.prototype&&(s|=to(o))}return null!=n&&(n.errorInfo=s),s}function eo(t,e){return t.hasOwnProperty(e)}function no(t,e,n,i){n=n===vi?0:n,i=i===vi?t.length:i,mi.h(n,i,t.length),t.fill(e,n,i)}function io(t){return vs(t),oo.call(t),t}function ro(t,e){return vs(e,t),oo.call(e),e}function so(t){var e=ro(t,ps(fs(oo)));return ls(e,so),e}function oo(){ls(this,oo)}function ao(t){var e=function(t,e){return _o(t,e),uo.call(e),e}(t,ps(fs(uo)));return ls(e,ao),e}function uo(){ls(this,uo)}function ho(t){var e=function(t,e){return _o(t,e),co.call(e),e}(t,ps(fs(co)));return ls(e,ho),e}function co(){ls(this,co)}function lo(t){var e=function(t,e){return _o(t,e),fo.call(e),e}(t,ps(fs(fo)));return ls(e,lo),e}function fo(){ls(this,fo)}function po(){var t,e=(mo(t=ps(fs(vo))),vo.call(t),t);return ls(e,po),e}function vo(){ls(this,vo)}function mo(t){return io(t),bo.call(t),t}function _o(t,e){return ro(t,e),bo.call(e),e}function go(t){var e=_o(t,ps(fs(bo)));return ls(e,go),e}function bo(){ls(this,bo)}function wo(){var t,e=(mo(t=ps(fs(Eo))),Eo.call(t),t);return ls(e,wo),e}function yo(t){var e=function(t,e){return _o(t,e),Eo.call(e),e}(t,ps(fs(Eo)));return ls(e,yo),e}function Eo(){ls(this,Eo)}function Io(){var t,e=(mo(t=ps(fs(ko))),ko.call(t),t);return ls(e,Io),e}function ko(){ls(this,ko)}function So(t){var e=function(t,e){return _o(t,e),Ro.call(e),e}(t,ps(fs(Ro)));return ls(e,So),e}function Ro(){ls(this,Ro)}function Ao(){var t,e=(mo(t=ps(fs(Lo))),Lo.call(t),t);return ls(e,Ao),e}function Lo(){ls(this,Lo)}function To(){var t,e=(mo(t=ps(fs(Co))),Co.call(t),t);return ls(e,To),e}function Co(){ls(this,Co)}function qo(t){var e=function(t,e){return _o(t,e),Oo.call(e),e}(t,ps(fs(Oo)));return ls(e,qo),e}function Oo(){ls(this,Oo)}function No(){}function Po(){this.g_1=2147483639}function Mo(t,e){return e===t?"(this Map)":Wr(e)}function $o(t,e){var n;t:{for(var i=t.k1().l();i.m();){var r=i.o();if(cs(r.l1(),e)){n=r;break t}}n=null}return n}function Do(){this.n1_1=null,this.o1_1=null}function xo(){}function jo(){return t=ps(fs(Xo)),Di.call(t),Xo.call(t),t.q5_1=Go().s5_1,t;var t}function Uo(t,e){if(e<0)throw lo("Deque is too big.");if(e<=t.q5_1.length)return Hn;if(t.q5_1===Go().s5_1){var n=t,i=Cr(e,10);return n.q5_1=Fr(Array(i),null),Hn}!function(t,e){var n=Fr(Array(e),null),i=t.q5_1,r=t.p5_1,s=t.q5_1.length;Ni(i,n,0,r,s);var o=t.q5_1,a=t.q5_1.length-t.p5_1|0,u=t.p5_1;Ni(o,n,a,0,u),t.p5_1=0,t.q5_1=n}(t,mi.z2(t.q5_1.length,e))}function Bo(t,e){return e>=t.q5_1.length?e-t.q5_1.length|0:e}function Wo(t,e){return e===Ar(t.q5_1)?0:e+1|0}function Vo(t,e){return 0===e?Ar(t.q5_1):e-1|0}function zo(t,e,n){var i=n.l(),r=e,s=t.q5_1.length;if(r<s)t:do{var o=r;if(r=r+1|0,!i.m())break t;t.q5_1[o]=i.o()}while(r<s);var a=0,u=t.p5_1;if(a<u)t:do{var h=a;if(a=a+1|0,!i.m())break t;t.q5_1[h]=i.o()}while(a<u);t.r5_1=t.r5_1+n.q()|0}function Fo(){gi=this;this.s5_1=[],this.t5_1=10}function Go(){return null==gi&&new Fo,gi}function Xo(){Go(),this.p5_1=0,this.r5_1=0}function Ho(){return function(){null==bi&&new Qo;return bi}()}function Jo(t){return t.q()-1|0}function Qo(){bi=this,this.b6_1=new ys(-1478467534,-1720727600)}function Yo(){}function Zo(t,e){this.d6_1=t,this.e6_1=e}function Ko(t,e){return t.p(function(t){return new Ji(t)}(e))}function ta(){}function ea(t,e,n){return na(na(t,n)-na(e,n)|0,n)}function na(t,e){var n=t%e|0;return n>=0?n:n+e|0}function ia(){yi=this,this.i6_1=new ra(1,0)}function ra(t,e){null==yi&&new ia,aa.call(this,t,e,1)}function sa(t,e,n){ta.call(this),this.p6_1=n,this.q6_1=e,this.r6_1=this.p6_1>0?t<=e:t>=e,this.s6_1=this.r6_1?t:this.q6_1}function oa(){}function aa(t,e,n){if(0===n)throw ao("Step must be non-zero.");if(n===Jn.MIN_VALUE)throw ao("Step must be greater than Int.MIN_VALUE to avoid overflow on negation.");this.m6_1=t,this.n6_1=function(t,e,n){var i;if(n>0)i=t>=e?e:e-ea(e,t,n)|0;else{if(!(n<0))throw ao("Step is zero.");i=t<=e?e:e+ea(t,e,0|-n)|0}return i}(t,e,n),this.o6_1=n}function ua(t,e,n){var i;null!=n?t.d4(n(e)):null==e||("string"==typeof(i=e)||Zs(i,Ri))?t.d4(e):e instanceof Mr?t.t3(e.t6_1):t.d4(Wr(e))}function ha(t,e,n){if(t===e)return!0;if(!(n=n!==vi&&n))return!1;var i,r=kr(t),s=kr(e);r===s?i=!0:i=Kr(Or(r).toLowerCase(),0)===Kr(Or(s).toLowerCase(),0);return i}function ca(t){return es(t)-1|0}function la(t,e,n){return n=n!==vi&&n,"string"==typeof e?function(t,e,n,i){var r,s;n=n===vi?0:n,s=!!(i=i!==vi&&i)||!("string"==typeof t);r=s?fa(t,e,n,es(t),i):t.indexOf(e,n);return r}(t,e,vi,n)>=0:fa(t,e,0,es(t),n)>=0}function fa(t,e,n,i,r,s){var o,a,u=(s=s!==vi&&s)?function(t,e){return Ei.e4(t,e,-1)}(qr(n,ca(t)),Cr(i,0)):(o=Cr(n,0),a=qr(i,es(t)),new ra(o,a));if("string"==typeof t&&"string"==typeof e){var h=u.m6_1,c=u.n6_1,l=u.o6_1;if(l>0&&h<=c||l<0&&c<=h)do{var f=h;if(h=h+l|0,Sr(e,0,t,f,es(e),r))return f}while(f!==c)}else{var d=u.m6_1,p=u.n6_1,v=u.o6_1;if(v>0&&d<=p||v<0&&p<=d)do{var m=d;if(d=d+v|0,da(e,0,t,m,es(e),r))return m}while(m!==p)}return-1}function da(t,e,n,i,r,s){if(i<0||e<0||e>(es(t)-r|0)||i>(es(n)-r|0))return!1;var o=0;if(o<r)do{var a=o;if(o=o+1|0,!ha(Kr(t,e+a|0),Kr(n,i+a|0),s))return!1}while(o<r);return!0}function pa(t,e){this.u6_1=t,this.v6_1=e}Gs(Ri,"CharSequence",Xs),Gs(Ai,"Number",zs),Gs(Li,"Unit",Hs),Gs(Ti,"IntCompanionObject",Hs),Gs(Dr,"Collection",Xs),Gs(No,"AbstractCollection",zs,vi,[Dr]),Gs(Mi,"AbstractMutableCollection",zs,No,[No,Dr]),Gs($i,"IteratorImpl",zs),Gs($r,"List",Xs,vi,[Dr]),Gs(Di,"AbstractMutableList",zs,Mi,[Mi,Dr,$r]),Gs(jr,"Map",Xs),Gs(Do,"AbstractMap",zs,vi,[jr]),Gs(xi,"AbstractMutableMap",zs,Do,[Do,jr]),Gs(Ur,"Set",Xs,vi,[Dr]),Gs(ji,"AbstractMutableSet",zs,Mi,[Mi,Dr,Ur]),Gs(zi,"Companion",Hs),Gs(Ji,"ArrayList",zs,Di,[Di,Dr,$r],Fi),Gs(Yi,"HashMap",zs,xi,[xi,jr],(function(){return Qi(ps(fs(Yi)))})),Gs(Ki,"HashMapEntrySetBase",zs,ji,[Dr,Ur,ji]),Gs(Zi,"HashMapEntrySet",zs,Ki),Gs(dr,"Companion",Hs),Gs(pr,"Itr",zs),Gs(vr,"EntriesItr",zs,pr),Gs(xr,"Entry",Xs),Gs(mr,"EntryRef",zs,vi,[xr]),Gs(gr,"InternalMap",Xs),Gs(_r,"InternalHashMap",zs,vi,[gr],ir),Gs(wr,"LinkedHashMap",zs,Yi,[Yi,jr],br),Gs(Ir,"StringBuilder",zs,vi,[Ri],Er),Gs(Nr,"Companion",Hs),Gs(Mr,"Char",zs),Gs((function(){}),"Companion",Hs),Gs(Br,"Enum",zs),Gs(Gr,vi,zs),Gs(ws,"Companion",Hs),Gs(ys,"Long",zs,Ai),Gs(oo,"Exception",zs,Error,vi,(function t(){var e=io(ps(fs(oo)));return ls(e,t),e})),Gs(bo,"RuntimeException",zs,oo,vi,(function t(){var e=mo(ps(fs(bo)));return ls(e,t),e})),Gs(uo,"IllegalArgumentException",zs,bo,vi,(function t(){var e=(n=ps(fs(uo)),mo(n),uo.call(n),n);var n;return ls(e,t),e})),Gs(co,"IndexOutOfBoundsException",zs,bo,vi,(function t(){var e=(n=ps(fs(co)),mo(n),co.call(n),n);var n;return ls(e,t),e})),Gs(fo,"IllegalStateException",zs,bo,vi,(function t(){var e=(n=ps(fs(fo)),mo(n),fo.call(n),n);var n;return ls(e,t),e})),Gs(vo,"UnsupportedOperationException",zs,bo,vi,po),Gs(Eo,"NoSuchElementException",zs,bo,vi,wo),Gs(ko,"ConcurrentModificationException",zs,bo,vi,Io),Gs(Ro,"ArithmeticException",zs,bo,vi,(function t(){var e=(n=ps(fs(Ro)),mo(n),Ro.call(n),n);var n;return ls(e,t),e})),Gs(Lo,"NullPointerException",zs,bo,vi,Ao),Gs(Co,"ClassCastException",zs,bo,vi,To),Gs(Oo,"UninitializedPropertyAccessException",zs,bo,vi,(function t(){var e=(n=ps(fs(Oo)),mo(n),Oo.call(n),n);var n;return ls(e,t),e})),Gs(Po,"Companion",Hs),Gs((function(){}),"Companion",Hs),Gs(xo,"Companion",Hs),Gs(Fo,"Companion",Hs),Gs(Xo,"ArrayDeque",zs,Di,vi,jo),Gs(Qo,"EmptyList",Hs,vi,[$r]),Gs(Yo,"EmptyIterator",Hs),Gs(Zo,"ArrayAsCollection",zs,vi,[Dr]),Gs(ta,"IntIterator",zs),Gs(ia,"Companion",Hs),Gs(aa,"IntProgression",zs),Gs(ra,"IntRange",zs,aa),Gs(sa,"IntProgressionIterator",zs,ta),Gs(oa,"Companion",Hs),Gs(pa,"Pair",zs),fs(Li).toString=function(){return"kotlin.Unit"},fs(Ti).c=function(){return this.MIN_VALUE},fs(Ti).d=function(){return this.MAX_VALUE},fs(Ti).e=function(){return this.SIZE_BYTES},fs(Ti).f=function(){return this.SIZE_BITS},fs(Mi).j=function(t){this.k();for(var e=this.l();e.m();)if(cs(e.o(),t))return e.n(),!0;return!1},fs(Mi).p=function(t){this.k();for(var e=!1,n=t.l();n.m();){var i=n.o();this.i(i)&&(e=!0)}return e},fs(Mi).toJSON=function(){return this.toArray()},fs(Mi).k=function(){},fs($i).m=function(){return this.u_1<this.w_1.q()},fs($i).o=function(){if(!this.m())throw wo();var t=this.u_1;return this.u_1=t+1|0,this.v_1=t,this.w_1.x(this.v_1)},fs($i).n=function(){if(-1===this.v_1){throw lo(as("Call next() or previous() before removing element from the iterator."))}this.w_1.z(this.v_1),this.u_1=this.v_1,this.v_1=-1},fs(Di).i=function(t){return this.k(),this.a1(this.q(),t),!0},fs(Di).l=function(){return new $i(this)},fs(Di).r=function(t){return this.b1(t)>=0},fs(Di).b1=function(t){var e;t:{for(var n=0,i=this.l();i.m();){if(cs(i.o(),t)){e=n;break t}n=n+1|0}e=-1}return e},fs(Di).equals=function(t){return t===this||!(null==t||!Zs(t,$r))&&mi.c1(this,t)},fs(Di).hashCode=function(){return mi.d1(this)},fs(xi).j1=function(t){this.k();for(var e=this.k1().l();e.m();){var n=e.o();if(cs(t,n.l1())){var i=n.m1();return e.n(),i}}return null},fs(xi).k=function(){},fs(ji).equals=function(t){return t===this||!(null==t||!Zs(t,Ur))&&_i.s1(this,t)},fs(ji).hashCode=function(){return _i.t1(this)},fs(Ji).q=function(){return this.v1_1.length},fs(Ji).x=function(t){var e=this.v1_1[Hi(this,t)];return null==e||null!=e?e:_s()},fs(Ji).i=function(t){return this.k(),this.v1_1.push(t),this.y_1=this.y_1+1|0,!0},fs(Ji).a1=function(t,e){this.k(),this.v1_1.splice(function(t,e){return mi.z1(e,t.q()),e}(this,t),0,e),this.y_1=this.y_1+1|0},fs(Ji).p=function(t){if(this.k(),t.t())return!1;for(var e,n,i,r=(e=this,n=t.q(),i=e.q(),e.v1_1.length=e.q()+n|0,i),s=0,o=t.l();o.m();){var a=o.o(),u=s;s=u+1|0;var h=Pi(u);this.v1_1[r+h|0]=a}return this.y_1=this.y_1+1|0,!0},fs(Ji).z=function(t){return this.k(),Hi(this,t),this.y_1=this.y_1+1|0,t===Jo(this)?this.v1_1.pop():this.v1_1.splice(t,1)[0]},fs(Ji).j=function(t){this.k();var e=0,n=this.v1_1.length-1|0;if(e<=n)do{var i=e;if(e=e+1|0,cs(this.v1_1[i],t))return this.v1_1.splice(i,1),this.y_1=this.y_1+1|0,!0}while(e<=n);return!1},fs(Ji).b1=function(t){return Lr(this.v1_1,t)},fs(Ji).toString=function(){return t=this.v1_1,e=(e=", ")===vi?", ":e,n=(n="[")===vi?"":n,i=(i="]")===vi?"":i,r=(r=vi)===vi?-1:r,s=(s=vi)===vi?"...":s,o=(o=ns)===vi?null:o,function(t,e,n,i,r,s,o,a){n=n===vi?", ":n,i=i===vi?"":i,r=r===vi?"":r,s=s===vi?-1:s,o=o===vi?"...":o,a=a===vi?null:a,e.d4(i);var u=0,h=0,c=t.length;t:for(;h<c;){var l=t[h];if(h=h+1|0,(u=u+1|0)>1&&e.d4(n),!(s<0||u<=s))break t;ua(e,l,a)}return s>=0&&u>s&&e.d4(o),e.d4(r),e}(t,Er(),e,n,i,r,s,o).toString();var t,e,n,i,r,s,o},fs(Ji).a2=function(){return[].slice.call(this.v1_1)},fs(Ji).toArray=function(){return this.a2()},fs(Ji).k=function(){if(this.w1_1)throw po()},fs(Yi).p1=function(t){return this.f2_1.h2(t)},fs(Yi).k1=function(){var t,e=this.g2_1;if(null==e){var n=new Zi(this.f2_1);this.g2_1=n,t=n}else t=e;return t},fs(Yi).r1=function(t){return this.f2_1.r1(t)},fs(Yi).i1=function(t,e){return this.f2_1.i1(t,e)},fs(Yi).j1=function(t){return this.f2_1.j1(t)},fs(Yi).q=function(){return this.f2_1.q()},fs(Zi).l=function(){return this.j2_1.k2()},fs(Ki).q=function(){return this.j2_1.q()},fs(Ki).t=function(){return 0===this.j2_1.q()},fs(Ki).l2=function(t){return this.j2_1.n2(t)},fs(Ki).r=function(t){return!(null==t||!Zs(t,xr))&&this.l2(null!=t&&Zs(t,xr)?t:_s())},fs(Ki).m2=function(t){throw po()},fs(Ki).i=function(t){return this.m2(null!=t&&Zs(t,xr)?t:_s())},fs(Ki).p=function(t){throw po()},fs(Ki).s=function(t){return this.j2_1.o2(t)},fs(Ki).k=function(){return this.j2_1.k()},fs(pr).i3=function(){for(;this.f3_1<this.e3_1.u2_1&&this.e3_1.r2_1[this.f3_1]<0;)this.f3_1=this.f3_1+1|0},fs(pr).m=function(){return this.f3_1<this.e3_1.u2_1},fs(pr).n=function(){if(this.j3(),-1===this.g3_1){throw lo(as("Call next() before removing element from the iterator."))}this.e3_1.k(),fr(this.e3_1,this.g3_1),this.g3_1=-1,this.h3_1=this.e3_1.w2_1},fs(pr).j3=function(){if(this.e3_1.w2_1!==this.h3_1)throw Io()},fs(vr).o=function(){if(this.j3(),this.f3_1>=this.e3_1.u2_1)throw wo();var t=this.f3_1;this.f3_1=t+1|0,this.g3_1=t;var e=new mr(this.e3_1,this.g3_1);return this.i3(),e},fs(vr).o3=function(){if(this.f3_1>=this.e3_1.u2_1)throw wo();var t=this.f3_1;this.f3_1=t+1|0,this.g3_1=t;var e=this.e3_1.p2_1[this.g3_1],n=null==e?null:us(e),i=null==n?0:n,r=ms(this.e3_1.q2_1)[this.g3_1],s=null==r?null:us(r),o=i^(null==s?0:s);return this.i3(),o},fs(vr).p3=function(t){if(this.f3_1>=this.e3_1.u2_1)throw wo();var e=this.f3_1;this.f3_1=e+1|0,this.g3_1=e;var n=this.e3_1.p2_1[this.g3_1];cs(n,this.e3_1)?t.s3("(this Map)"):t.r3(n),t.t3(61);var i=ms(this.e3_1.q2_1)[this.g3_1];cs(i,this.e3_1)?t.s3("(this Map)"):t.r3(i),this.i3()},fs(mr).l1=function(){return this.u3_1.p2_1[this.v3_1]},fs(mr).m1=function(){return ms(this.u3_1.q2_1)[this.v3_1]},fs(mr).equals=function(t){return!!(!(null==t||!Zs(t,xr))&&cs(t.l1(),this.l1()))&&cs(t.m1(),this.m1())},fs(mr).hashCode=function(){var t=this.l1(),e=null==t?null:us(t),n=null==e?0:e,i=this.m1(),r=null==i?null:us(i);return n^(null==r?0:r)},fs(mr).toString=function(){return this.l1()+"="+this.m1()},fs(_r).q=function(){return this.x2_1},fs(_r).r1=function(t){var e=lr(this,t);return e<0?null:ms(this.q2_1)[e]},fs(_r).h2=function(t){return lr(this,t)>=0},fs(_r).i1=function(t,e){var n=function(t,e){t.k();t:for(;;)for(var n=ur(t,e),i=qr(Si(t.t2_1,2),sr(t)/2|0),r=0;;){var s=t.s2_1[n];if(s<=0){if(t.u2_1>=rr(t)){ar(t,1);continue t}var o=t.u2_1;t.u2_1=o+1|0;var a=o;return t.p2_1[a]=e,t.r2_1[a]=n,t.s2_1[n]=a+1|0,t.x2_1=t.x2_1+1|0,or(t),r>t.t2_1&&(t.t2_1=r),a}if(cs(t.p2_1[s-1|0],e))return 0|-s;if((r=r+1|0)>i){hr(t,Si(sr(t),2));continue t}var u=n;n=u-1|0,0===u&&(n=sr(t)-1|0)}}(this,t),i=function(t){var e=t.q2_1;if(null!=e)return e;var n=Ui(rr(t));return t.q2_1=n,n}(this);if(n<0){var r=i[(0|-n)-1|0];return i[(0|-n)-1|0]=e,r}return i[n]=e,null},fs(_r).j1=function(t){var e=function(t,e){t.k();var n=lr(t,e);return n<0?-1:(fr(t,n),n)}(this,t);if(e<0)return null;var n=ms(this.q2_1),i=n[e];return Bi(n,e),i},fs(_r).equals=function(t){var e;t===this?e=!0:e=!(null==t||!Zs(t,jr))&&function(t,e){return t.x2_1===e.q()&&t.o2(e.k1())}(this,t);return e},fs(_r).hashCode=function(){for(var t=0,e=this.k2();e.m();)t=t+e.o3()|0;return t},fs(_r).toString=function(){var t,e=(Si(this.x2_1,3),yr(t=ps(fs(Ir))),t);e.s3("{");for(var n=0,i=this.k2();i.m();)n>0&&e.s3(", "),i.p3(e),n=n+1|0;return e.s3("}"),e.toString()},fs(_r).k=function(){if(this.y2_1)throw po()},fs(_r).n2=function(t){var e=lr(this,t.l1());return!(e<0)&&cs(ms(this.q2_1)[e],t.m1())},fs(_r).w3=function(t){return this.n2(Zs(t,xr)?t:_s())},fs(_r).k2=function(){return new vr(this)},fs(wr).k=function(){return this.f2_1.k()},fs(Ir).a=function(){return this.q3_1.length},fs(Ir).b=function(t){var e=this.q3_1;if(!(t>=0&&t<=ca(e)))throw ho("index: "+t+", length: "+this.a()+"}");return Kr(e,t)},fs(Ir).t3=function(t){return this.q3_1=this.q3_1+Or(t),this},fs(Ir).d4=function(t){return this.q3_1=this.q3_1+Wr(t),this},fs(Ir).r3=function(t){return this.q3_1=this.q3_1+Wr(t),this},fs(Ir).s3=function(t){var e=this.q3_1;return this.q3_1=e+(null==t?"null":t),this},fs(Ir).toString=function(){return this.q3_1},fs(Br).r4=function(){return this.p4_1},fs(Br).s4=function(){return this.q4_1},fs(Br).t4=function(t){return function(t,e){var n;switch(typeof t){case"number":n="number"==typeof e?is(t,e):e instanceof ys?is(t,e.z4()):rs(t,e);break;case"string":case"boolean":n=rs(t,e);break;default:n=function(t,e){return t.u4(e)}(t,e)}return n}(this.q4_1,t.q4_1)},fs(Br).u4=function(t){return this.t4(t instanceof Br?t:_s())},fs(Br).equals=function(t){return this===t},fs(Br).hashCode=function(){return ss(this)},fs(Br).toString=function(){return this.p4_1},fs(Gr).m=function(){return!(this.v4_1===this.w4_1.length)},fs(Gr).o=function(){if(this.v4_1===this.w4_1.length)throw yo(""+this.v4_1);var t=this.v4_1;return this.v4_1=t+1|0,this.w4_1[t]},fs(ys).e5=function(t){return As(this,t)},fs(ys).u4=function(t){return this.e5(t instanceof ys?t:_s())},fs(ys).f5=function(t){return Ls(this,t)},fs(ys).g5=function(t){return Ts(this,t)},fs(ys).h5=function(t){return function(t,e){if(Vs(),$s(e))throw so("division by zero");if($s(t))return Es();if(Os(t,Ss())){if(Os(e,Is())||Os(e,ks()))return Ss();if(Os(e,Ss()))return Is();var n=function(t,e){Vs();var n=63&e;return 0===n?t:n<32?new ys(t.x4_1<<n,t.y4_1<<n|t.x4_1>>>(32-n|0)|0):new ys(0,t.x4_1<<(n-32|0))}(function(t,e){Vs();var n=63&e;return 0===n?t:n<32?new ys(t.x4_1>>>n|0|t.y4_1<<(32-n|0),t.y4_1>>n):new ys(t.y4_1>>(n-32|0),t.y4_1>=0?0:-1)}(t,1).h5(e),1);return Os(n,Es())?Ms(e)?Is():ks():Ls(n,Ts(t,Cs(e,n)).h5(e))}if(Os(e,Ss()))return Es();if(Ms(t))return Ms(e)?xs(t).h5(xs(e)):xs(xs(t).h5(e));if(Ms(e))return xs(t.h5(xs(e)));var i=Es(),r=t;for(;Ws(r,e);){for(var s=qs(r)/qs(e),o=Math.max(1,Math.floor(s)),a=Math.ceil(Math.log(o)/Math.LN2),u=a<=48?1:Math.pow(2,a-48),h=Us(o),c=Cs(h,e);Ms(c)||Bs(c,r);)c=Cs(h=Us(o-=u),e);$s(h)&&(h=Is()),i=Ls(i,h),r=Ts(r,c)}return i}(this,t)},fs(ys).i5=function(){return this.j5().f5(new ys(1,0))},fs(ys).j5=function(){return new ys(~this.x4_1,~this.y4_1)},fs(ys).k5=function(){return this.x4_1},fs(ys).z4=function(){return qs(this)},fs(ys).valueOf=function(){return this.z4()},fs(ys).equals=function(t){return t instanceof ys&&Os(this,t)},fs(ys).hashCode=function(){return t=this,Vs(),t.x4_1^t.y4_1;var t},fs(ys).toString=function(){return Ns(this,10)},fs(No).r=function(t){var e;t:{if(!!Zs(this,Dr)&&this.t())e=!1;else{for(var n=this.l();n.m();){if(cs(n.o(),t)){e=!0;break t}}e=!1}}return e},fs(No).s=function(t){var e;t:{if(!!Zs(t,Dr)&&t.t())e=!0;else{for(var n=t.l();n.m();){var i=n.o();if(!this.r(i)){e=!1;break t}}e=!0}}return e},fs(No).t=function(){return 0===this.q()},fs(No).toString=function(){return Tr(this,", ","[","]",vi,vi,(t=this,function(e){return e===t?"(this Collection)":Wr(e)}));var t},fs(No).toArray=function(){return Ci(this)},fs(Po).y1=function(t,e){if(t<0||t>=e)throw ho("index: "+t+", size: "+e)},fs(Po).z1=function(t,e){if(t<0||t>e)throw ho("index: "+t+", size: "+e)},fs(Po).h=function(t,e,n){if(t<0||e>n)throw ho("fromIndex: "+t+", toIndex: "+e+", size: "+n);if(t>e)throw ao("fromIndex: "+t+" > toIndex: "+e)},fs(Po).z2=function(t,e){var n=t+(t>>1)|0;return(n-e|0)<0&&(n=e),(n-2147483639|0)>0&&(n=e>2147483639?Jn.MAX_VALUE:2147483639),n},fs(Po).d1=function(t){for(var e=1,n=t.l();n.m();){var i=n.o(),r=Si(31,e),s=null==i?null:us(i);e=r+(null==s?0:s)|0}return e},fs(Po).c1=function(t,e){if(t.q()!==e.q())return!1;for(var n=e.l(),i=t.l();i.m();){if(!cs(i.o(),n.o()))return!1}return!0},fs(Do).p1=function(t){return!(null==$o(this,t))},fs(Do).q1=function(t){if(null==t||!Zs(t,xr))return!1;var e=t.l1(),n=t.m1(),i=(Zs(this,jr)?this:_s()).r1(e);return!!cs(n,i)&&!(null==i&&!(Zs(this,jr)?this:_s()).p1(e))},fs(Do).equals=function(t){if(t===this)return!0;if(null==t||!Zs(t,jr))return!1;if(this.q()!==t.q())return!1;var e;t:{var n=t.k1();if(!!Zs(n,Dr)&&n.t())e=!0;else{for(var i=n.l();i.m();){var r=i.o();if(!this.q1(r)){e=!1;break t}}e=!0}}return e},fs(Do).r1=function(t){var e=$o(this,t);return null==e?null:e.m1()},fs(Do).hashCode=function(){return us(this.k1())},fs(Do).q=function(){return this.k1().q()},fs(Do).toString=function(){var t;return Tr(this.k1(),", ","{","}",vi,vi,(t=this,function(e){return t.n5(e)}))},fs(Do).n5=function(t){return Mo(this,t.l1())+"="+Mo(this,t.m1())},fs(xo).t1=function(t){for(var e=0,n=t.l();n.m();){var i=n.o(),r=e,s=null==i?null:us(i);e=r+(null==s?0:s)|0}return e},fs(xo).s1=function(t,e){return t.q()===e.q()&&t.s(e)},fs(Xo).q=function(){return this.r5_1},fs(Xo).t=function(){return 0===this.r5_1},fs(Xo).u5=function(t){Uo(this,this.r5_1+1|0),this.p5_1=Vo(this,this.p5_1),this.q5_1[this.p5_1]=t,this.r5_1=this.r5_1+1|0},fs(Xo).v5=function(t){Uo(this,this.r5_1+1|0);var e=this.q5_1,n=this.r5_1;e[Bo(this,this.p5_1+n|0)]=t,this.r5_1=this.r5_1+1|0},fs(Xo).w5=function(){if(this.t())throw yo("ArrayDeque is empty.");var t=this.p5_1,e=this.q5_1[t],n=null==e||null!=e?e:_s();return this.q5_1[this.p5_1]=null,this.p5_1=Wo(this,this.p5_1),this.r5_1=this.r5_1-1|0,n},fs(Xo).x5=function(){if(this.t())throw yo("ArrayDeque is empty.");var t=Jo(this),e=Bo(this,this.p5_1+t|0),n=this.q5_1[e],i=null==n||null!=n?n:_s();return this.q5_1[e]=null,this.r5_1=this.r5_1-1|0,i},fs(Xo).i=function(t){return this.v5(t),!0},fs(Xo).a1=function(t,e){if(mi.z1(t,this.r5_1),t===this.r5_1)return this.v5(e),Hn;if(0===t)return this.u5(e),Hn;Uo(this,this.r5_1+1|0);var n=Bo(this,this.p5_1+t|0);if(t<(this.r5_1+1|0)>>1){var i=Vo(this,n),r=Vo(this,this.p5_1);if(i>=this.p5_1)this.q5_1[r]=this.q5_1[this.p5_1],Ni(this.q5_1,this.q5_1,this.p5_1,this.p5_1+1|0,i+1|0);else Ni(this.q5_1,this.q5_1,this.p5_1-1|0,this.p5_1,this.q5_1.length),this.q5_1[this.q5_1.length-1|0]=this.q5_1[0],Ni(this.q5_1,this.q5_1,0,1,i+1|0);this.q5_1[i]=e,this.p5_1=r}else{var s=this.r5_1,o=Bo(this,this.p5_1+s|0);if(n<o)Ni(this.q5_1,this.q5_1,n+1|0,n,o);else Ni(this.q5_1,this.q5_1,1,0,o),this.q5_1[0]=this.q5_1[this.q5_1.length-1|0],Ni(this.q5_1,this.q5_1,n+1|0,n,this.q5_1.length-1|0);this.q5_1[n]=e}this.r5_1=this.r5_1+1|0},fs(Xo).p=function(t){if(t.t())return!1;Uo(this,this.r5_1+t.q()|0);var e=this.r5_1;return zo(this,Bo(this,this.p5_1+e|0),t),!0},fs(Xo).y5=function(t,e){if(mi.z1(t,this.r5_1),e.t())return!1;if(t===this.r5_1)return this.p(e);Uo(this,this.r5_1+e.q()|0);var n=this.r5_1,i=Bo(this,this.p5_1+n|0),r=Bo(this,this.p5_1+t|0),s=e.q();if(t<(this.r5_1+1|0)>>1){var o=this.p5_1-s|0;if(r>=this.p5_1)if(o>=0){Ni(this.q5_1,this.q5_1,o,this.p5_1,r)}else{o=o+this.q5_1.length|0;var a=r-this.p5_1|0,u=this.q5_1.length-o|0;if(u>=a)Ni(this.q5_1,this.q5_1,o,this.p5_1,r);else Ni(this.q5_1,this.q5_1,o,this.p5_1,this.p5_1+u|0),Ni(this.q5_1,this.q5_1,0,this.p5_1+u|0,r)}else if(Ni(this.q5_1,this.q5_1,o,this.p5_1,this.q5_1.length),s>=r)Ni(this.q5_1,this.q5_1,this.q5_1.length-s|0,0,r);else Ni(this.q5_1,this.q5_1,this.q5_1.length-s|0,0,s),Ni(this.q5_1,this.q5_1,0,s,r);this.p5_1=o,zo(this,function(t,e){return e<0?e+t.q5_1.length|0:e}(this,r-s|0),e)}else{var h=r+s|0;if(r<i)if((i+s|0)<=this.q5_1.length)Ni(this.q5_1,this.q5_1,h,r,i);else if(h>=this.q5_1.length){Ni(this.q5_1,this.q5_1,h-this.q5_1.length|0,r,i)}else{var c=(i+s|0)-this.q5_1.length|0;Ni(this.q5_1,this.q5_1,0,i-c|0,i),Ni(this.q5_1,this.q5_1,h,r,i-c|0)}else if(Ni(this.q5_1,this.q5_1,s,0,i),h>=this.q5_1.length)Ni(this.q5_1,this.q5_1,h-this.q5_1.length|0,r,this.q5_1.length);else Ni(this.q5_1,this.q5_1,0,this.q5_1.length-s|0,this.q5_1.length),Ni(this.q5_1,this.q5_1,h,r,this.q5_1.length-s|0);zo(this,r,e)}return!0},fs(Xo).x=function(t){mi.y1(t,this.r5_1);var e=Bo(this,this.p5_1+t|0),n=this.q5_1[e];return null==n||null!=n?n:_s()},fs(Xo).r=function(t){return!(-1===this.b1(t))},fs(Xo).b1=function(t){var e=this.r5_1,n=Bo(this,this.p5_1+e|0);if(this.p5_1<n){var i=this.p5_1;if(i<n)do{var r=i;if(i=i+1|0,cs(t,this.q5_1[r]))return r-this.p5_1|0}while(i<n)}else if(this.p5_1>=n){var s=this.p5_1,o=this.q5_1.length;if(s<o)do{var a=s;if(s=s+1|0,cs(t,this.q5_1[a]))return a-this.p5_1|0}while(s<o);var u=0;if(u<n)do{var h=u;if(u=u+1|0,cs(t,this.q5_1[h]))return(h+this.q5_1.length|0)-this.p5_1|0}while(u<n)}return-1},fs(Xo).j=function(t){var e=this.b1(t);return-1!==e&&(this.z(e),!0)},fs(Xo).z=function(t){if(mi.y1(t,this.r5_1),t===Jo(this))return this.x5();if(0===t)return this.w5();var e=Bo(this,this.p5_1+t|0),n=this.q5_1[e],i=null==n||null!=n?n:_s();if(t<this.r5_1>>1){if(e>=this.p5_1)Ni(this.q5_1,this.q5_1,this.p5_1+1|0,this.p5_1,e);else Ni(this.q5_1,this.q5_1,1,0,e),this.q5_1[0]=this.q5_1[this.q5_1.length-1|0],Ni(this.q5_1,this.q5_1,this.p5_1+1|0,this.p5_1,this.q5_1.length-1|0);this.q5_1[this.p5_1]=null,this.p5_1=Wo(this,this.p5_1)}else{var r=Jo(this),s=Bo(this,this.p5_1+r|0);if(e<=s)Ni(this.q5_1,this.q5_1,e,e+1|0,s+1|0);else Ni(this.q5_1,this.q5_1,e,e+1|0,this.q5_1.length),this.q5_1[this.q5_1.length-1|0]=this.q5_1[0],Ni(this.q5_1,this.q5_1,0,1,s+1|0);this.q5_1[s]=null}return this.r5_1=this.r5_1-1|0,i},fs(Xo).z5=function(){var t=this.r5_1,e=Bo(this,this.p5_1+t|0);this.p5_1<e?no(this.q5_1,null,this.p5_1,e):this.t()||(no(this.q5_1,null,this.p5_1,this.q5_1.length),no(this.q5_1,null,0,e)),this.p5_1=0,this.r5_1=0},fs(Xo).a6=function(t){var e,n=t.length>=this.r5_1?t:(e=this.r5_1,Fr(Array(e),null)),i=Ks(n)?n:_s(),r=this.r5_1,s=Bo(this,this.p5_1+r|0);this.p5_1<s?Ni(this.q5_1,i,0,this.p5_1,s):this.t()||(Ni(this.q5_1,i,0,this.p5_1,this.q5_1.length),Ni(this.q5_1,i,this.q5_1.length-this.p5_1|0,0,s));var o=function(t,e){return e}(this.r5_1,i);return Ks(o)?o:_s()},fs(Xo).a2=function(){var t=this.r5_1,e=Fr(Array(t),null);return this.a6(e)},fs(Xo).toArray=function(){return this.a2()},fs(Qo).equals=function(t){return!(null==t||!Zs(t,$r))&&t.t()},fs(Qo).hashCode=function(){return 1},fs(Qo).toString=function(){return"[]"},fs(Qo).q=function(){return 0},fs(Qo).t=function(){return!0},fs(Qo).c6=function(t){return t.t()},fs(Qo).s=function(t){return this.c6(t)},fs(Qo).x=function(t){throw ho("Empty list doesn't contain element at index "+t+".")},fs(Qo).l=function(){return wi},fs(Yo).m=function(){return!1},fs(Yo).o=function(){throw wo()},fs(Zo).q=function(){return this.d6_1.length},fs(Zo).t=function(){return 0===this.d6_1.length},fs(Zo).f6=function(t){return function(t,e){return Lr(t,e)>=0}(this.d6_1,t)},fs(Zo).g6=function(t){var e;t:{if(!!Zs(t,Dr)&&t.t())e=!0;else{for(var n=t.l();n.m();){var i=n.o();if(!this.f6(i)){e=!1;break t}}e=!0}}return e},fs(Zo).s=function(t){return this.g6(t)},fs(Zo).l=function(){return new Gr(this.d6_1)},fs(ta).o=function(){return this.h6()},fs(ra).t=function(){return this.m6_1>this.n6_1},fs(ra).equals=function(t){return t instanceof ra&&(!(!this.t()||!t.t())||this.m6_1===t.m6_1&&this.n6_1===t.n6_1)},fs(ra).hashCode=function(){return this.t()?-1:Si(31,this.m6_1)+this.n6_1|0},fs(ra).toString=function(){return this.m6_1+".."+this.n6_1},fs(sa).m=function(){return this.r6_1},fs(sa).h6=function(){var t=this.s6_1;if(t===this.q6_1){if(!this.r6_1)throw wo();this.r6_1=!1}else this.s6_1=this.s6_1+this.p6_1|0;return t},fs(oa).e4=function(t,e,n){return new aa(t,e,n)},fs(aa).l=function(){return new sa(this.m6_1,this.n6_1,this.o6_1)},fs(aa).t=function(){return this.o6_1>0?this.m6_1>this.n6_1:this.m6_1<this.n6_1},fs(aa).equals=function(t){return t instanceof aa&&(!(!this.t()||!t.t())||this.m6_1===t.m6_1&&this.n6_1===t.n6_1&&this.o6_1===t.o6_1)},fs(aa).hashCode=function(){return this.t()?-1:Si(31,Si(31,this.m6_1)+this.n6_1|0)+this.o6_1|0},fs(aa).toString=function(){return this.o6_1>0?this.m6_1+".."+this.n6_1+" step "+this.o6_1:this.m6_1+" downTo "+this.n6_1+" step "+(0|-this.o6_1)},fs(pa).toString=function(){return"("+this.u6_1+", "+this.v6_1+")"},fs(pa).hashCode=function(){var t=null==this.u6_1?0:us(this.u6_1);return t=Si(t,31)+(null==this.v6_1?0:us(this.v6_1))|0},fs(pa).equals=function(t){if(this===t)return!0;if(!(t instanceof pa))return!1;var e=t instanceof pa?t:_s();return!!cs(this.u6_1,e.u6_1)&&!!cs(this.v6_1,e.v6_1)},fs(_r).o2=function(t){var e;t:{if(!!Zs(t,Dr)&&t.t())e=!0;else{for(var n=t.l();n.m();){var i=n.o();if(!(!(null==i||!Zs(i,xr))&&this.w3(i))){e=!1;break t}}e=!0}}return e},Hn=new Li,Jn=new Ti,new dr,mi=new Po,_i=new xo,wi=new Yo,Ei=new oa;var va,ma,_a,ga,ba,wa,ya,Ea,Ia,ka,Sa,Ra=Math.imul;function Aa(t,e){this.w6_1=t,this.x6_1=e}function La(t,e){this.b7_1=t,this.c7_1=e}function Ta(t){var e=t.hook;return!0===(null==e?null:la(e,"useInterval"))}function Ca(t,e,n){this.request=t,this.response=e,this.mode=n}function qa(){if(ga)return Hn;ga=!0,va=new Oa("SYNC",0),ma=new Oa("ASYNC",1),_a=new Oa("SPEC",2)}function Oa(t,e){Br.call(this,t,e)}function Na(){return qa(),va}function Pa(){return qa(),ma}function Ma(){return qa(),_a}function $a(t,e){this.m7_1=t,this.n7_1=e}function Da(t){var e=t.w7_1;if(null!=e)return e;gs("assembler")}function xa(t){var e=t.d8_1;if(null!=e)return e;gs("local")}function ja(t){var e=t.e8_1;if(null!=e)return e;gs("remote")}function Ua(t){var e=t.f8_1;if(null!=e)return e;gs("timers")}function Ba(t){Va(t),t.k8_1=!0,t.t7_1.a7(["recalculateSpeculativeWork"]);var e=t.x7_1.l(),n=0;t:for(;e.m();){var i=n;n=n+1|0;var r=e.o();if(0!==i&&(!0!==r.retry&&!0!==r.async&&!r.scope.equals(ru()))){if(t.z7_1.r5_1>10)break t;t.z7_1.i(r)}}t.t7_1.a7(["Speculative queue size: "+t.z7_1.r5_1]),Ha(t,t.z7_1)}function Wa(t){t.t7_1.a7(["cancelSpeculation"]),t.k8_1=!1,Va(t)}function Va(t){t.z7_1.z5(),t.h8_1=t.q7_1.clone(t.state),t.i8_1=t.i8_1+1|0}function za(t,e,n){if(e.t())return Hn;var i,r=function(t){if(t.t())throw yo("List is empty.");return t.x(0)}(e),s=!!r.scope.equals(ru())||!(!(i=r.scope).equals(ru())&&!i.equals(nu()))&&!xa(t).isReady();n.equals(Na())&&(t.a8_1=!0);var o=t.p7_1.l8(n.equals(Ma())?t.h8_1:t.state,e),a=s?ja(t):xa(t),u=t.u7_1;t.u7_1=u+1|0;var h,c,l,f,d,p,v,m,_=u,g=t.i8_1,b=Sa.m8("runtime_trace"),w=new $a((h=t,c=n,l=s,f=b,d=e,p=_,v=g,m=o,function(t){if(h.t7_1.a7(["Signpost: Response success for "+Fa(h,c,l)+" request"]),Ha(h,t),f.u8(),lu(h.s7_1.performanceAnalyticsDelegate,f,l,"",d.q()),h.b8_1.j1(p),c.equals(Ma())&&h.i8_1!==v)return h.t7_1.a7(["throwing away stale speculative results"]),Hn;h.t7_1.a7(["Responding to "+Fa(h,c,l)+" runtime result subscriptions"]);for(var e=h.c8_1.l();e.m();)e.o()(new Ca(m,t,c));return c.equals(Na())?(h.state=h.q7_1.merge(h.state,t.state),h.a8_1=!1):c.equals(Ma())&&(h.h8_1=h.q7_1.merge(h.h8_1,t.state)),h.v8(Rr(t.replay),c),c.equals(Na())&&h.j8_1&&Ba(h),h.o8(),Hn}),function(t,e,n,i,r,s){return function(o){t.t7_1.a7(["Signpost: Response error for "+Fa(t,e,n)+" request",o]),i.u8(),lu(t.s7_1.performanceAnalyticsDelegate,i,n,"",r.q());var a=t.s7_1.performanceAnalyticsDelegate,u=o.message;if(function(t,e,n,i){t.logRuntimeError(new uu(e,fu(n),i))}(a,null==u?"":u,n,""),t.b8_1.j1(s),e.equals(Na())&&(t.a8_1=!1),e.equals(Ma()))return Wa(t),t.o8(),Hn;for(var h=r,c=br(),l=h.l();l.m();){var f,d=l.o(),p=!d.scope.equals(ru())&&!(!0===d.retry),v=c.r1(p);if(null==v){var m=Fi();c.i1(p,m),f=m}else f=v;f.i(d)}var _=c,g=_.r1(!1);if(null!=g&&!g.t()){var b=_.r1(!1),w=Oi(null==b?Ho():b);t.t7_1.a7(Js([["unretryable events",o],w])),t.s7_1.errorHandler(o)}var y=_.r1(!0);if(null!=y&&!y.t()){var E=_.r1(!0);if(null==E);else for(var I=E.l();I.m();){var k=I.o();k.retry=!0,k.scope=ru()}var S=_.r1(!0);t.v8(null==S?Ho():S,e),e.equals(Na())&&t.j8_1&&Ba(t),t.o8()}return Hn}}(t,n,s,b,e,_));t.b8_1.i1(_,w),t.t7_1.a7(["Signpost: Handling "+Fa(t,n,s)+" request"]),Ha(t,o),a.handle(t.r7_1,o,w.m7_1,w.n7_1)}function Fa(t,e,n){return(n?"remote":"local")+" "+e+" runtime"}function Ga(t,e){t.k8_1=t.j8_1,t.a8_1=!1,t.state=t.q7_1.clone(t.g8_1),t.y7_1.z5(),t.x7_1.z5(),xa(t).reset(),ja(t).reset(),Wa(t),e&&Ua(t).clear()}function Xa(t,e,n){var i;try{i=n()}catch(n){if(!(n instanceof oo))throw n;var r=n;t.t7_1.n8([r]),t.s7_1.errorHandler(r),i=e}return i}function Ha(t,e){t.s7_1.featureFlags.isVerboseLoggingEnabled&&t.t7_1.a7([e])}function Ja(t,e){this.p8_1=t,this.q8_1=e}function Qa(t,e,n,i,r){i=i===vi?"RenderPostContent":i,r=r===vi?new Za:r,this.o7_1=t,this.p7_1=e,this.q7_1=n,this.r7_1=i,this.s7_1=r,this.t7_1=new vu(this.s7_1.logger),this.u7_1=0;var s;this.v7_1=new su((s=this,function(){return xa(s).isReady()}),this.t7_1),this.x7_1=jo(),this.y7_1=jo(),this.z7_1=jo(),this.a8_1=!1;this.b8_1=br();this.c8_1=Fi(),this.g8_1=this.q7_1.clone(this.state),this.h8_1=this.q7_1.clone(this.g8_1),this.i8_1=0,this.j8_1=this.s7_1.featureFlags.isSpeculativeExecutionEnabled,this.k8_1=this.j8_1,this.t7_1.a7(["Signpost: Constructed KMP Dispatcher"])}function Ya(t){return Hn}function Za(){this.d9_1=new mu;this.e9_1=Ya,this.f9_1=ka,this.g9_1=new cu}function Ka(t,e,n,i,r,s){this.state=t,this.syncQueue=e,this.asyncQueue=n,this.localSnapshot=i,this.remoteSnapshot=r,this.timerSnapshot=s}function tu(){if(Ea)return Hn;Ea=!0,ba=new eu("ALL",0),wa=new eu("LOCAL",1),ya=new eu("REMOTE",2)}function eu(t,e){Br.call(this,t,e)}function nu(){return tu(),ba}function iu(){return tu(),wa}function ru(){return tu(),ya}function su(t,e){this.y9_1=t,this.z9_1=e}function ou(){}function au(t,e){this.spanName=t,this.durationMs=e}function uu(t,e,n){this.message=t,this.origin=e,this.version=n}function hu(){}function cu(){}function lu(t,e,n,i,r){t.logRuntimeTrace(new du(e.r8_1,e.ea().toString(),i,fu(n),r))}function fu(t){return t?"remote":"local"}function du(t,e,n,i,r){au.call(this,t,e),this.intent=n,this.target=i,this.eventCount=r}function pu(){this.ia_1=!1,this.ja_1=!1,this.ka_1=!1}function vu(t){this.z6_1=t}function mu(){}function _u(t,e){this.id=t,this.duration=e}function gu(t,e){this.r8_1=t,this.s8_1=e,this.t8_1=new ys(0,0)}function bu(){}function wu(t,e,n,i){n=n===vi?"RenderPostContent":n,i=i===vi?new Za:i,Qa.call(this,t,new yu(e),new Iu,n,i),this.ob_1=n,this.pb_1=i}function yu(t){this.qb_1=t}function Eu(t){for(var e,n,i=Object.entries,r=(null!=i&&"function"==typeof i?i:_s())(t),s=Gi(r.length),o=0,a=r.length;o<a;){var u=r[o];o=o+1|0;var h=u[0],c=(e=null!=h&&"string"==typeof h?h:_s(),n=u[1],new pa(e,n));s.i(c)}return s}function Iu(){}function ku(){return(t=(new Date).getTime())instanceof ys?t:Us(t);var t}Gs(Aa,"OneAtATimeAssembler",zs),Gs(La,"AllAtOnceAssembler",zs),Gs(Ca,"SubscribeCallbackParams",zs),Gs(Oa,"Mode",zs,Br),Gs($a,"Callback",zs),Gs(Ja,vi,zs),Gs(Qa,"DispatcherImpl",zs),Gs(Za,"EmptyOptions",zs,vi,vi,Za),Gs(Ka,"DispatcherSnapshot",zs),Gs(eu,"EventScope",zs,Br),Gs(su,"LocalEventsDeduper",zs),Gs(ou,"NoOpUnsubscriber",Hs),Gs(au,"BaseTrace",zs),Gs(uu,"ErrorInfo",zs),Gs(hu,"PerformanceAnalyticsDelegate",Xs),Gs(cu,"NoOpPerformanceAnalyticsDelegate",zs,vi,[hu],cu),Gs(du,"RuntimeTrace",zs,au),Gs(pu,"Disabled",Hs),Gs(vu,"NiceLogger",zs),Gs(mu,"NoOpLogger",zs,vi,vi,mu),Gs(_u,"TimerDefinition",zs),Gs(gu,"Span",zs),Gs(bu,"Tracer",Hs),Gs(wu,"JsDispatcherImpl",zs,Qa),Gs(yu,"JsRequestBuilderAdapter",zs),Gs(Iu,"JsonStateOperations",zs,vi,vi,Iu),fs(Aa).y6=function(t,e){var n;if(t.t())n=Ho();else{for(var i=this.x6_1.list(),r=t.w5();Ta(r);){for(var s=0,o=i.length;s<o;){var a=i[s];if(s=s+1|0,a.id===r.hook)return this.w6_1.a7([e+" building batch of ",r]),qi(r)}if(t.t())return Ho();r=t.w5()}this.w6_1.a7([e+" building batch of ",r]),n=qi(r)}return n},fs(La).y6=function(t,e){var n;if(t.t())n=Ho();else{for(var i=this.c7_1.list(),r=Fi(),s=t.l();s.m();){var o,a=s.o();if(Ta(a)){var u;if(0===i.length)u=!1;else{var h;t:{for(var c=0,l=i.length;c<l;){var f=i[c];if(c=c+1|0,f.id===a.hook){h=f;break t}}h=null}u=!(null==h)}o=u}else o=!0;o&&r.i(a)}var d=r;t.z5(),this.b7_1.a7([e+" building batch of ",d]),n=d}return n},fs(Ca).d7=function(){return this.request},fs(Ca).e7=function(){return this.response},fs(Ca).f7=function(){return this.mode},fs(Ca).g7=function(){return this.request},fs(Ca).h7=function(){return this.response},fs(Ca).i7=function(){return this.mode},fs(Ca).j7=function(t,e,n){return new Ca(t,e,n)},fs(Ca).copy=function(t,e,n,i){return t=t===vi?this.request:t,e=e===vi?this.response:e,n=n===vi?this.mode:n,this.j7(t,e,n)},fs(Ca).toString=function(){return"SubscribeCallbackParams(request="+this.request+", response="+this.response+", mode="+this.mode+")"},fs(Ca).hashCode=function(){var t=null==this.request?0:us(this.request);return t=Ra(t,31)+(null==this.response?0:us(this.response))|0,t=Ra(t,31)+this.mode.hashCode()|0},fs(Ca).equals=function(t){if(this===t)return!0;if(!(t instanceof Ca))return!1;var e=t instanceof Ca?t:_s();return!!cs(this.request,e.request)&&(!!cs(this.response,e.response)&&!!this.mode.equals(e.mode))},fs($a).toString=function(){return"Callback(success="+this.m7_1+", failure="+this.n7_1+")"},fs($a).hashCode=function(){var t=us(this.m7_1);return t=Ra(t,31)+us(this.n7_1)|0},fs($a).equals=function(t){if(this===t)return!0;if(!(t instanceof $a))return!1;var e=t instanceof $a?t:_s();return!!cs(this.m7_1,e.m7_1)&&!!cs(this.n7_1,e.n7_1)},fs(Ja).unsubscribe=function(){this.p8_1.c8_1.j(this.q8_1)},fs(Qa).x8=function(t){this.o7_1=t},fs(Qa).y8=function(){return this.o7_1},fs(Qa).z8=function(){return this.x7_1},fs(Qa).a9=function(){return this.y7_1},fs(Qa).b9=function(){return this.z7_1},fs(Qa).init=function(t,e,n){var i,r,s,o;Xa(this,Hn,(i=this,r=t,s=e,o=n,function(){i.t7_1.a7(["Signpost: Initializing Dispatcher",r,s]),i.d8_1=r,i.e8_1=s,i.f8_1=o;var t,e=i;return t=i.s7_1.featureFlags.isUsingEverythingAssembler?new La(i.t7_1,o):new Aa(i.t7_1,o),e.w7_1=t,i.o8(),Hn}))},fs(Qa).subscribe=function(t){var e,n;return Xa(this,Ia,(e=t,n=this,function(){var t="function"==typeof e?e:_s();return n.c8_1.i(t),new Ja(n,t)}))},fs(Qa).o8=function(){if(this.t7_1.a7(["ticking","syncInFlight "+this.a8_1,"asyncQueue.size "+this.y7_1.r5_1,"syncQueue.size "+this.x7_1.r5_1,"speculativeQueue.size "+this.z7_1.r5_1]),!xa(this).isReady()&&!ja(this).isReady()&&(!this.x7_1.t()||!this.y7_1.t()))return this.t7_1.c9(["ticking with events and no runtime, deferring..."]),Hn;if(this.a8_1){if(this.k8_1){za(this,Da(this).y6(this.z7_1,Ma()),Ma())}}else za(this,Da(this).y6(this.x7_1,Na()),Na());if(!this.y7_1.t()){for(;!this.y7_1.t();){za(this,Da(this).y6(this.y7_1,Pa()),Pa())}this.o8()}},fs(Qa).v8=function(t,e){if(t.t()||e.equals(Ma()))return Hn;this.t7_1.a7(["replaying "+t.q()+" events"]),Ha(this,t);for(var n=br(),i=t.l();i.m();){var r,s=i.o(),o=new pa(!0===s.async,!0===s.retry),a=n.r1(o);if(null==a){var u=Fi();n.i1(o,u),r=u}else r=a;r.i(s)}var h=n,c=h.r1(new pa(!0,!0));this.y7_1.y5(0,null==c?Ho():c);var l=h.r1(new pa(!0,!1));this.y7_1.p(null==l?Ho():l);var f=h.r1(new pa(!1,!0));this.x7_1.y5(0,null==f?Ho():f);var d=h.r1(new pa(!1,!1));this.x7_1.p(null==d?Ho():d)},fs(Qa).submit=function(t){var e,n;Xa(this,Hn,(e=this,n=t,function(){e.t7_1.a7(Js([["Signpost: Submitted events"],n]));for(var t=e.v7_1.w8(Rr(n)).l();t.m();){var i=t.o();!0===i.async?e.y7_1.i(i):(e.x7_1.i(i),e.a8_1&&e.k8_1&&e.z7_1.i(i))}return e.o8(),Hn}))},fs(Qa).reset=function(){var t;Xa(this,Hn,(t=this,function(){return Ga(t,!0),Hn}))},fs(Qa).snapshot=function(){return new Ka(this.q7_1.clone(this.state),Oi(this.x7_1),Oi(this.y7_1),xa(this).snapshot(),ja(this).snapshot(),Ua(this).list())},fs(Qa).pause=function(){var t=this.snapshot();return Ua(this).pauseAll(),Ga(this,!1),t},fs(Qa).resume=function(t){var e,n;Xa(this,Hn,(e=this,n=t,function(){e.state=e.q7_1.clone(n.state),e.y7_1.z5();var t=n.asyncQueue;Ko(e.y7_1,Ks(t)?t:_s()),e.x7_1.z5();var i=n.syncQueue;return Ko(e.x7_1,Ks(i)?i:_s()),Wa(e),xa(e).resume(n.localSnapshot),ja(e).resume(n.remoteSnapshot),Ua(e).resumeAll(n.timerSnapshot),Hn}))},fs(Za).h9=function(t){this.d9_1=t},fs(Za).i9=function(){return this.d9_1},fs(Za).j9=function(t){this.e9_1=t},fs(Za).k9=function(){return this.e9_1},fs(Za).l9=function(t){this.f9_1=t},fs(Za).m9=function(){return this.f9_1},fs(Za).n9=function(t){this.g9_1=t},fs(Za).o9=function(){return this.g9_1},fs(Ka).y8=function(){return this.state},fs(Ka).z8=function(){return this.syncQueue},fs(Ka).a9=function(){return this.asyncQueue},fs(Ka).p9=function(){return this.localSnapshot},fs(Ka).q9=function(){return this.remoteSnapshot},fs(Ka).r9=function(){return this.timerSnapshot},fs(Ka).g7=function(){return this.state},fs(Ka).h7=function(){return this.syncQueue},fs(Ka).i7=function(){return this.asyncQueue},fs(Ka).s9=function(){return this.localSnapshot},fs(Ka).t9=function(){return this.remoteSnapshot},fs(Ka).u9=function(){return this.timerSnapshot},fs(Ka).v9=function(t,e,n,i,r,s){return new Ka(t,e,n,i,r,s)},fs(Ka).copy=function(t,e,n,i,r,s,o){return t=t===vi?this.state:t,e=e===vi?this.syncQueue:e,n=n===vi?this.asyncQueue:n,i=i===vi?this.localSnapshot:i,r=r===vi?this.remoteSnapshot:r,s=s===vi?this.timerSnapshot:s,this.v9(t,e,n,i,r,s)},fs(Ka).toString=function(){return"DispatcherSnapshot(state="+this.state+", syncQueue="+as(this.syncQueue)+", asyncQueue="+as(this.asyncQueue)+", localSnapshot="+this.localSnapshot+", remoteSnapshot="+this.remoteSnapshot+", timerSnapshot="+this.timerSnapshot+")"},fs(Ka).hashCode=function(){var t=null==this.state?0:us(this.state);return t=Ra(t,31)+us(this.syncQueue)|0,t=Ra(t,31)+us(this.asyncQueue)|0,t=Ra(t,31)+(null==this.localSnapshot?0:us(this.localSnapshot))|0,t=Ra(t,31)+(null==this.remoteSnapshot?0:us(this.remoteSnapshot))|0,t=Ra(t,31)+(null==this.timerSnapshot?0:us(this.timerSnapshot))|0},fs(Ka).equals=function(t){if(this===t)return!0;if(!(t instanceof Ka))return!1;var e=t instanceof Ka?t:_s();return!!cs(this.state,e.state)&&(!!cs(this.syncQueue,e.syncQueue)&&(!!cs(this.asyncQueue,e.asyncQueue)&&(!!cs(this.localSnapshot,e.localSnapshot)&&(!!cs(this.remoteSnapshot,e.remoteSnapshot)&&!!cs(this.timerSnapshot,e.timerSnapshot)))))},fs(su).w8=function(t){var e;if(this.y9_1())e=t;else{for(var n=Fi(),i=Fi(),r=t.l();r.m();){var s=r.o();s.scope.equals(iu())?i.i(s):n.i(s)}var o=new pa(n,i);if(!o.v6_1.t()){var a=["Dropping "+o.v6_1.q()+" local events",o.v6_1];this.z9_1.a7([a])}e=o.u6_1}return e},fs(ou).unsubscribe=function(){},fs(au).aa=function(){return this.spanName},fs(au).ba=function(){return this.durationMs},fs(uu).l5=function(){return this.message},fs(uu).ca=function(){return this.origin},fs(uu).da=function(){return this.version},fs(cu).logRuntimeTrace=function(t){},fs(cu).logRuntimeError=function(t){},fs(du).fa=function(){return this.intent},fs(du).ga=function(){return this.target},fs(du).ha=function(){return this.eventCount},fs(pu).la=function(){return this.ia_1},fs(pu).ma=function(){return this.ja_1},fs(pu).na=function(){return this.ka_1},fs(vu).n8=function(t){var e=Js([[this.z6_1.tag()],t]);this.z6_1.error(e)},fs(vu).c9=function(t){var e=Js([[this.z6_1.tag()],t]);this.z6_1.warn(e)},fs(vu).a7=function(t){var e=Js([[this.z6_1.tag()],t]);this.z6_1.debug(e)},fs(mu).info=function(t){},fs(mu).error=function(t){},fs(mu).warn=function(t){},fs(mu).debug=function(t){},fs(mu).tag=function(){return""},fs(_u).oa=function(){return this.id},fs(_u).pa=function(){return this.duration},fs(_u).g7=function(){return this.id},fs(_u).h7=function(){return this.duration},fs(_u).qa=function(t,e){return new _u(t,e)},fs(_u).copy=function(t,e,n){return t=t===vi?this.id:t,e=e===vi?this.duration:e,this.qa(t,e)},fs(_u).toString=function(){return"TimerDefinition(id="+this.id+", duration="+this.duration+")"},fs(_u).hashCode=function(){var t=hs(this.id);return t=Ra(t,31)+this.duration|0},fs(_u).equals=function(t){if(this===t)return!0;if(!(t instanceof _u))return!1;var e=t instanceof _u?t:_s();return this.id===e.id&&this.duration===e.duration},fs(gu).u8=function(){this.t8_1=ku()},fs(gu).ea=function(){return this.t8_1.g5(this.s8_1)},fs(bu).m8=function(t){return new gu(t,ku())},fs(yu).rb=function(t,e){var n=Oi(e);return this.qb_1.build(t,n)},fs(yu).l8=function(t,e){return this.rb(null!=t&&null!=t?t:_s(),e)},fs(Iu).clone=function(t){return JSON.parse(JSON.stringify(t))},fs(Iu).merge=function(t,e){for(var n={},i=null!=n&&null!=n?n:_s(),r=Eu(t).l();r.m();){var s=r.o();i[s.u6_1]=s.v6_1}for(var o=Eu(e).l();o.m();){var a=o.o();i[a.u6_1]=a.v6_1}return i},ds(fs(Oa),"name",fs(Oa).r4),ds(fs(Oa),"ordinal",fs(Oa).s4),ds(fs(Qa),"state",(function(){return this.y8()}),(function(t){this.x8(t)})),ds(fs(Za),"logger",(function(){return this.i9()}),(function(t){this.h9(t)})),ds(fs(Za),"errorHandler",(function(){return this.k9()}),(function(t){this.j9(t)})),ds(fs(Za),"featureFlags",(function(){return this.m9()}),(function(t){this.l9(t)})),ds(fs(Za),"performanceAnalyticsDelegate",(function(){return this.o9()}),(function(t){this.n9(t)})),ds(fs(eu),"name",fs(eu).r4),ds(fs(eu),"ordinal",fs(eu).s4),ds(fs(pu),"isSpeculativeExecutionEnabled",(function(){return this.la()})),ds(fs(pu),"isVerboseLoggingEnabled",(function(){return this.ma()})),ds(fs(pu),"isUsingEverythingAssembler",(function(){return this.na()})),ds(fs(wu),"state",(function(){return this.y8()}),(function(t){this.x8(t)})),Ia=new ou,ka=new pu,Sa=new bu,Oa.values=function(){return[Na(),Pa(),Ma()]},Oa.valueOf=function(t){switch(t){case"SYNC":return Na();case"ASYNC":return Pa();case"SPEC":return Ma();default:qa(),bs("No enum constant value.")}},ds(Oa,"SYNC",Na),ds(Oa,"ASYNC",Pa),ds(Oa,"SPEC",Ma),eu.values=function(){return[nu(),iu(),ru()]},eu.valueOf=function(t){switch(t){case"ALL":return nu();case"LOCAL":return iu();case"REMOTE":return ru();default:tu(),bs("No enum constant value.")}},ds(eu,"ALL",nu),ds(eu,"LOCAL",iu),ds(eu,"REMOTE",ru);class Su{constructor(t){this.scope=t.scope?(t=>{switch(t){case h.ALL:return eu.ALL;case h.REMOTE:return eu.REMOTE;case h.LOCAL:return eu.LOCAL;case h.UNRECOGNIZED:return eu.ALL;default:throw new Error(`Unknown UIEventScope: ${t}`)}})(t.scope):eu.ALL,this.async=t.async,this.hook=t.hook,this.retry=t.retry,this.uiEvent=t}}class Ru{constructor(t){this.uiRequest=t,this.events=t.events.map((t=>new Su(t))),t.state&&(this.state=t.state)}}class Au{constructor(t){this.uiResponse=t,this.replay=t.events.map((t=>new Su(t))),t.state&&(this.state=t.state)}}var Lu,Tu,Cu,qu,Ou,Nu=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n},Pu=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)};const Mu=new Set(["RenderPostContent"]);function $u(t){if(Mu.has(t.split("/").at(-1)))return t;throw Error(`Unsupported RPC ${t}`)}class Du{constructor(t){Lu.set(this,void 0),Tu.set(this,void 0),Nu(this,Lu,t,"f")}set env(t){Nu(this,Lu,t,"f")}set props(t){Nu(this,Tu,t,"f")}build(t,e){return new Ru({state:t,events:e.map((t=>t.uiEvent)),env:Pu(this,Lu,"f"),props:Pu(this,Tu,"f")})}}Lu=new WeakMap,Tu=new WeakMap;class xu{constructor(){Cu.set(this,void 0),qu.set(this,!1),Ou.set(this,((t,e,n,i,r)=>{this.onPluginCall?.(t,e,n,i,r),e===a.fullName&&n===a.methods.send.name&&Pu(this,Cu,"f")?.onPluginResponse(t,{error:void 0,success:!0,value:{}})}))}isReady(){return!!Pu(this,Cu,"f")?.ready}set runtimeDebugLogging(t){Nu(this,qu,t,"f"),Pu(this,Cu,"f")&&(Pu(this,Cu,"f").runtimeDebugLogging=t)}setLocalSrc(t){this.unload(),Nu(this,Cu,t?new Qt(t,((t,e)=>console.error(t,e)),{callback:Pu(this,Ou,"f"),plugins:[]}):void 0,"f"),Pu(this,Cu,"f")&&(Pu(this,Cu,"f").runtimeDebugLogging=Pu(this,qu,"f"))}unload(){Pu(this,Cu,"f")?.quit()}async load(t){this.unload();try{return await(Pu(this,Cu,"f")?.loadBundle(t))}catch(t){console.error(t)}}handle(t,e,n,i){if(!this.isReady()||!Pu(this,Cu,"f"))throw new Error("local runtime handle called before isReady");devvit?.debug.runtime&&console.debug("[runtime] Local request",e,this.metadata),Pu(this,Cu,"f")?.call($u(t),e.uiRequest,this.metadata).then((t=>n(new Au(t)))).catch((t=>i(t)))}pause(){}reset(){}resume(){}snapshot(){return{}}}Cu=new WeakMap,qu=new WeakMap,Ou=new WeakMap;class ju{isReady(){return!!this.remote}load(t){this.remote=t}handle(t,e,n,i){if(!this.isReady()||!this.remote)throw new Error("remote runtime called remote before isReady()");this.remote[$u(t)](e.uiRequest,this.metadata).then((t=>n(new Au(t)))).catch(i)}pause(){}reset(){}resume(){}snapshot(){return{}}}var Uu,Bu,Wu,Vu=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n},zu=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)};class Fu{constructor(t){Uu.set(this,new Map),Bu.set(this,new Map),Wu.set(this,void 0),devvit?.debug.runtime&&console.debug("[runtime] timers: constructor"),Vu(this,Wu,t,"f")}add(t){devvit?.debug.runtime&&console.debug("[runtime] timers: add",t),zu(this,Bu,"f").set(t.id,t),zu(this,Uu,"f").set(t.id,window.setInterval((()=>{zu(this,Wu,"f").submit([new Su({scope:h.ALL,timer:{},hook:t.id})])}),t.duration))}apply(t){devvit?.debug.runtime&&console.debug("[runtime] timers: apply",t);const e=new Map(zu(this,Bu,"f"));t.forEach((t=>{e.delete(t.id),zu(this,Bu,"f").has(t.id)||(devvit?.debug.runtime&&console.debug("[runtime] timers: apply - adding definition",t),this.add(t))})),devvit?.debug.runtime&&console.debug("[runtime] timers: apply - removing the following definitions",e);for(const[t]of e)this.remove(t)}clear(){devvit?.debug.runtime&&console.debug("[runtime] timers: clear");for(const t of zu(this,Uu,"f").values())clearInterval(t);zu(this,Uu,"f").clear(),zu(this,Bu,"f").clear()}list(){return devvit?.debug.runtime&&console.debug("[runtime] timers: list"),[...zu(this,Bu,"f").values()]}pauseAll(){devvit?.debug.runtime&&console.debug("[runtime] timers: pauseAll");for(const t of zu(this,Uu,"f").values())clearInterval(t);return this.list()}remove(t){devvit?.debug.runtime&&console.debug("[runtime] timers: remove"),zu(this,Bu,"f").delete(t),clearInterval(zu(this,Uu,"f").get(t)),zu(this,Uu,"f").delete(t)}resumeAll(t){devvit?.debug.runtime&&console.debug("[runtime] timers: resumeAll"),this.apply(t)}}Uu=new WeakMap,Bu=new WeakMap,Wu=new WeakMap;var Gu,Xu,Hu,Ju,Qu,Yu,Zu,Ku,th,eh=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n},nh=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)};const ih=t=>"ServerCallRequired"===t.message;class rh{debug(t){devvit?.debug.runtime&&console.debug(this.tag(),...t)}error(t){ih(t[0])||console.error(this.tag(),...t)}info(t){console.info(this.tag(),...t)}warn(t){console.warn(this.tag(),...t)}tag(){return"[kmp-dispatcher]"}}class sh{constructor(t,e){Gu.set(this,void 0),Xu.set(this,void 0),this.__doNotUseOrImplementIt={"net.devvit.analytics.PerformanceAnalyticsDelegate":Symbol("net.devvit.analytics.PerformanceAnalyticsDelegate")},eh(this,Gu,t,"f"),eh(this,Xu,e,"f")}logRuntimeError(t){ih(t)||(console.error("[kmp-dispatcher-perf-analytics] error",t),nh(this,Xu,"f")?.call(this,t))}logRuntimeTrace(t){devvit?.debug.runtime&&console.debug("[kmp-dispatcher-perf-analytics]",t),nh(this,Gu,"f")?.call(this,t)}}Gu=new WeakMap,Xu=new WeakMap,$e();const oh=["showToast","showForm","navigateToUrl","createOrder"];class ah{get state(){return nh(this,Qu,"f").state}constructor(t,e,n){Hu.set(this,void 0),Ju.set(this,void 0),Qu.set(this,void 0),Yu.set(this,void 0),this.hasRendered=!1,Zu.set(this,void 0),Ku.set(this,void 0),th.set(this,void 0),eh(this,Hu,new Du(e),"f"),n.useSpeculativeExecution&&devvit?.debug.runtime&&console.debug("[webDispatcher] Using speculative execution mode!"),eh(this,Qu,new wu(t??{},nh(this,Hu,"f"),"RenderPostContent",{logger:new rh,featureFlags:{isSpeculativeExecutionEnabled:n.useSpeculativeExecution,isUsingEverythingAssembler:!1,isVerboseLoggingEnabled:!!devvit?.debug.runtime},performanceAnalyticsDelegate:new sh(n.performanceTracker,n.errorTracker),errorHandler:t=>this.onError?.(t)}),"f"),eh(this,Ju,new Fu(nh(this,Qu,"f")),"f"),eh(this,Zu,new ju,"f"),eh(this,Ku,new xu,"f"),this.init()}set metadata(t){const e={...t},n=[];for(const[t,e]of Object.entries(devvit?.debug??{}))n.push(`${t}=${e}`);n.length&&(e[b.Debug]={values:n}),nh(this,Ku,"f").metadata=e,nh(this,Zu,"f").metadata=e}set onPluginCall(t){nh(this,Ku,"f").onPluginCall=t}set runtimeDebugLogging(t){nh(this,Ku,"f").runtimeDebugLogging=t}subscribe(t){eh(this,Yu,nh(this,Qu,"f").subscribe(((...e)=>{devvit?.debug.runtime&&console.debug("[runtime] dispatcher got a new event from subscribe",e[0]);const[{response:n}]=e;n.uiResponse.effects.forEach((t=>{if(oh.some((e=>t[e]))||t.realtimeSubscriptions)this.onUserAction?.(t);else{if(t.interval){const e=Object.entries(t.interval.intervals);return 0===e.length&&nh(this,Ju,"f").clear(),void nh(this,Ju,"f").apply(e.map((([t,e])=>new _u(t,(({nanos:t,seconds:e})=>{const n=1e3*e,i=t/1e6;return Math.floor(n+i)})(e.duration)))))}t.webView?this.onWebViewMessage?.(t):console.warn(`Received an effect that is not implemented! Please add an effect handler to the web dispatcher. Effect: ${JSON.stringify(t,null,2)}`)}})),t(...e)})),"f")}submit(...t){nh(this,Qu,"f").submit(...t)}unsubscribe(){nh(this,Yu,"f")?.unsubscribe()}init(){nh(this,Qu,"f").init(nh(this,Ku,"f"),nh(this,Zu,"f"),nh(this,Ju,"f"))}togglePause(t){t?eh(this,th,nh(this,Qu,"f").pause(),"f"):nh(this,th,"f")&&nh(this,Qu,"f").resume(nh(this,th,"f"))}resetAppState(){this.hasRendered=!1,nh(this,Qu,"f").reset()}setEnv(t){nh(this,Hu,"f").env=t}setProps(t){nh(this,Hu,"f").props=t}remoteLoad(...t){nh(this,Zu,"f").load(...t)}async localLoad(...t){return nh(this,Ku,"f").reset(),await nh(this,Ku,"f").load(...t)}localLoadWorker(...t){nh(this,Ku,"f").setLocalSrc(...t)}}Hu=new WeakMap,Ju=new WeakMap,Qu=new WeakMap,Yu=new WeakMap,Zu=new WeakMap,Ku=new WeakMap,th=new WeakMap;var uh,hh,ch,lh,fh,dh,ph,vh,mh,_h,gh,bh,wh,yh,Eh=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Ih=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},kh=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)},Sh=function(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n};let Rh=class extends t{static get styles(){return[c]}constructor(){super(),uh.add(this),this.runtimeDebugLogging=!1,this.useExperimentalBlocks=!1,this.useSpeculativeExecution=!1,this.webViewUrlTemplate="",this.disableAssetSandbox=!1,hh.set(this,void 0),ch.set(this,void 0),lh.set(this,void 0),fh.set(this,""),dh.set(this,!1),ph.set(this,void 0),vh.set(this,(()=>({experimental:this.useExperimentalBlocks,resolveWebViewUrl:t=>this.disableAssetSandbox?t:sn(this.webViewUrlTemplate,this.metadata?.[b.Subreddit]?.values?.[0],kh(this,fh,"f"),t),onAction:t=>{const e={};t.type===f.ACTION_CLICK||kh(this,dh,"f")?e.userAction={actionId:t.id,data:t.data??{}}:t.type===f.ACTION_WEBVIEW&&(e.webView={postMessage:{message:t.data}}),kh(this,ph,"f")?.submit([new Su({scope:h.ALL,hook:t.id,...e})])},stackDirection:l.UNRECOGNIZED,disableAssetSandbox:this.disableAssetSandbox}))),mh.set(this,(t=>{tt(t)||console.error(t),kh(this,uh,"m",bh).call(this,"devvit-ui-error",{err:t,type:"Error"})})),_h.set(this,((t,e,n,i,r)=>{e===a.fullName&&n===a.methods.send.name&&kh(this,uh,"m",bh).call(this,"devvit-realtime-send",{event:i})})),gh.set(this,(({response:t})=>{var e,n;this.renderResponse=t,t?.blocks&&(this._rootBlock=t.blocks,kh(this,hh,"f")?((e=this._rootBlock).config??(e.config={}),(n=this._rootBlock.config).rootConfig??(n.rootConfig={children:[],height:0}),this._rootBlock.config.rootConfig.height=kh(this,hh,"f")):Sh(this,hh,this._rootBlock.config?.rootConfig?.height||z,"f"))})),wh.set(this,(t=>{kh(this,uh,"m",bh).call(this,"devvit-ui-effect",{effect:t,onEvent:t=>kh(this,ph,"f")?.submit([new Su(t)]),metadata:this.metadata})})),yh.set(this,(async t=>{if(await this.updateComplete,t.webView?.postMessage?.app&&t.webView.postMessage.webViewId){const e=this._blocksRenderer?.findBlockById(t.webView.postMessage.webViewId);e?.blockType===G.WebView&&e?.element?e.element.postMessage(t.webView.postMessage.app):console.error("Invalid postMessage request: could not find block with ID",t.webView.postMessage.webViewId)}})),devvit?.debug.surface&&console.debug("[surface] Using devvit-surface and KMP!")}async connectedCallback(){super.connectedCallback(),Sh(this,ph,new ah({},{colorScheme:this.scheme,dimensions:this.dimensions,locale:this.metadata?.[b.Language]?.values?.[0],timezone:this.metadata?.[b.Timezone]?.values?.[0]},{useSpeculativeExecution:this.useSpeculativeExecution,performanceTracker:t=>{kh(this,uh,"m",bh).call(this,X,{name:t.spanName,duration:parseInt(t.durationMs),target:t.target,intent:t.intent,eventCount:t.eventCount})},errorTracker:t=>{kh(this,uh,"m",bh).call(this,H,{message:t.message,origin:t.origin,version:t.version})}}),"f"),kh(this,ph,"f").onPluginCall=kh(this,_h,"f"),kh(this,ph,"f").onError=kh(this,mh,"f"),kh(this,ph,"f").onUserAction=kh(this,wh,"f"),kh(this,ph,"f").onWebViewMessage=kh(this,yh,"f"),kh(this,ph,"f").subscribe((t=>{kh(this,gh,"f").call(this,{request:t.request.uiRequest,response:t.response.uiResponse})})),Sh(this,ch,new ResizeObserver(et((t=>{0!==t.length&&(this.dimensions=st(t[0],window,document.body))}),600)),"f"),kh(this,ch,"f").observe(this,{box:"content-box"}),Sh(this,lh,new IntersectionObserver((t=>{t.forEach((t=>{kh(this,ph,"f")?.togglePause(!t.isIntersecting)}))})),"f"),kh(this,lh,"f").observe(this)}disconnectedCallback(){kh(this,ch,"f")?.unobserve(this),kh(this,ch,"f")?.disconnect(),kh(this,lh,"f")?.unobserve(this),kh(this,lh,"f")?.disconnect(),kh(this,ph,"f")?.unsubscribe(),super.disconnectedCallback()}render(){return this.renderResponse?e`<div class="relative"> <devvit-blocks-renderer class="${this.scheme??""}" .block="${this._rootBlock}" .renderContext="${kh(this,vh,"f")}"> <slot slot="empty-state-image" name="empty-state-image"></slot> </devvit-blocks-renderer> </div>`:e`<slot></slot>`}async willUpdate(t){if(kh(this,ph,"f")){if(kh(this,ph,"f").setEnv({colorScheme:this.scheme,dimensions:this.dimensions,locale:this.metadata?.[b.Language]?.values?.[0],timezone:this.metadata?.[b.Timezone]?.values?.[0]}),kh(this,ph,"f").setProps({...this.requestProps,postId:this.requestProps?.postId?rt(this.requestProps.postId):void 0}),kh(this,ph,"f").runtimeDebugLogging=this.runtimeDebugLogging,kh(this,ph,"f").metadata=this.metadata,t.has("remoteApp")&&(devvit?.debug.surface&&console.debug("[surface] remoteApp "+(this.remoteApp?"defined":"undefined")),kh(this,ph,"f").remoteLoad(this.remoteApp)),t.has("localRuntimeCode")&&(devvit?.debug.surface&&console.debug("[surface] local runtime "+(this.localRuntimeCode?"loading":"unloading")),kh(this,ph,"f").localLoadWorker(this.localRuntimeCode)),t.has("bundle")&&this.bundle){devvit?.debug.surface&&console.debug("[surface] bundle loading");const e=await kh(this,ph,"f").localLoad(this.bundle);e&&(kh(this,uh,"m",bh).call(this,F,{name:"init_runtime",duration:Math.round(e.metrics.init.end-e.metrics.init.start)}),e.metrics.loadBundle&&kh(this,uh,"m",bh).call(this,F,{name:"load_full_bundle",duration:Math.round(e.metrics.loadBundle.end-e.metrics.loadBundle.start)})),devvit?.debug.surface&&console.debug("[surface] bundle loaded"),Sh(this,fh,Xn(this.bundle.actor?.version)??"","f"),Sh(this,dh,""===kh(this,fh,"f")||""!==kh(this,fh,"f")&&Wn(kh(this,fh,"f"),"0.11.3"),"f"),t.get("bundle")&&(devvit?.debug.surface&&console.debug("[runtime][surface] reset runtime state"),Sh(this,hh,void 0,"f"),this.renderResponse=void 0,kh(this,ph,"f").resetAppState(),this._blocksRenderer?.reset())}this.dimensions&&(!kh(this,ph,"f").hasRendered||t.has("bundle")?(kh(this,ph,"f").hasRendered=!0,kh(this,ph,"f").submit([new Su({scope:h.ALL,blocking:{}})])):t.has("dimensions")&&kh(this,ph,"f").submit([new Su({scope:h.ALL,resize:{}})]))}}async getUpdateComplete(){const t=await super.getUpdateComplete();return await(this._blocksRenderer?.updateComplete),t}};hh=new WeakMap,ch=new WeakMap,lh=new WeakMap,fh=new WeakMap,dh=new WeakMap,ph=new WeakMap,vh=new WeakMap,mh=new WeakMap,_h=new WeakMap,gh=new WeakMap,wh=new WeakMap,yh=new WeakMap,uh=new WeakSet,bh=function(t,e){this.dispatchEvent(q(t,e))},Eh([A({attribute:!1}),Ih("design:type",Object)],Rh.prototype,"remoteApp",void 0),Eh([A({attribute:!1}),Ih("design:type",Object)],Rh.prototype,"bundle",void 0),Eh([A({attribute:!1}),Ih("design:type",Object)],Rh.prototype,"localRuntimeCode",void 0),Eh([A({attribute:!1}),Ih("design:type",Object)],Rh.prototype,"metadata",void 0),Eh([A({attribute:"requestProps",type:Object}),Ih("design:type",Object)],Rh.prototype,"requestProps",void 0),Eh([A({attribute:"runtime-debug-logging",type:Boolean}),Ih("design:type",Boolean)],Rh.prototype,"runtimeDebugLogging",void 0),Eh([A({attribute:"scheme"}),Ih("design:type",Object)],Rh.prototype,"scheme",void 0),Eh([A({attribute:"use-experimental-blocks",type:Boolean}),Ih("design:type",Boolean)],Rh.prototype,"useExperimentalBlocks",void 0),Eh([A({attribute:"use-speculative-execution",type:Boolean}),Ih("design:type",Boolean)],Rh.prototype,"useSpeculativeExecution",void 0),Eh([A({type:String}),Ih("design:type",String)],Rh.prototype,"webViewUrlTemplate",void 0),Eh([A({attribute:"disable-asset-sandbox",type:Boolean}),Ih("design:type",Boolean)],Rh.prototype,"disableAssetSandbox",void 0),Eh([L(),Ih("design:type",Object)],Rh.prototype,"dimensions",void 0),Eh([L(),Ih("design:type",Object)],Rh.prototype,"_rootBlock",void 0),Eh([T("devvit-blocks-renderer"),Ih("design:type",Object)],Rh.prototype,"_blocksRenderer",void 0),Rh=Eh([C("devvit-surface"),Ih("design:paramtypes",[])],Rh);var Ah,Lh,Th,Ch=function(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)};$e();class qh extends w{constructor(){super(...arguments),Ah.add(this),this._channels=Object.create(null),this._onSendEv=t=>{const{channel:e,data:n}=t.detail.event;if(devvit?.debug.realtime&&console.log(`[realtime] ${e} sends`,n),!(e in this._channels))throw Error(`realtime ${e} subscription required to send`);this.onSendSock(e,n).catch((t=>{console.error("[realtime] onSendSock() failed:",t)}))}}hostConnected(){super.hostConnected(),devvit?.debug.realtime&&console.log("[realtime] host connected"),this.host.addEventListener("devvit-realtime-send",this._onSendEv);for(const t in this._channels)"Disconnected"===this._channels[t]&&Ch(this,Ah,"m",Lh).call(this,t,void 0)}hostDisconnected(){super.hostDisconnected(),devvit?.debug.realtime&&console.log("[realtime] host disconnected");for(const t in this._channels)"Connected"===this._channels[t]&&Ch(this,Ah,"m",Th).call(this,t,void 0);this.host.removeEventListener("devvit-realtime-send",this._onSendEv)}onEvent(t){if(!t.detail.effect.realtimeSubscriptions)return;if(t.detail.effect.type!==d.EFFECT_REALTIME_SUB)return;const e=new Set(t.detail.effect.realtimeSubscriptions.subscriptionIds);for(const n of e)this._channels[n]||Ch(this,Ah,"m",Lh).call(this,n,t.detail.onEvent);for(const n in this._channels)e.has(n)||("Connected"===this._channels[n]&&Ch(this,Ah,"m",Th).call(this,n,t.detail.onEvent),"Disconnected"===this._channels[n]&&(this.onFreeSock(n),delete this._channels[n]))}}Ah=new WeakSet,Lh=function(t,e){devvit?.debug.realtime&&console.log(`[realtime] ${t} connected`),this._channels[t]="Connected",e?.({scope:h.ALL,hook:Nh(t),realtimeEvent:{event:{channel:t},status:p.REALTIME_SUBSCRIBED}});let n=e;devvit?.debug.realtime&&(n=n=>{console.log(`[realtime] ${t} receives`,n.realtimeEvent?.event?.data),e?.(n)}),this.onConnectSock(t,n)},Th=function(t,e){devvit?.debug.realtime&&console.log(`[realtime] ${t} disconnected`),this.onDisconnectSock(t),e?.({scope:h.ALL,hook:Nh(t),realtimeEvent:{event:{channel:t},status:p.REALTIME_UNSUBSCRIBED}}),this._channels[t]="Disconnected"};class Oh extends w{constructor(t){super(t),devvit?.debug.realtime&&console.log("[realtime] disabled")}onEvent(t){if(t.detail.effect.realtimeSubscriptions&&t.detail.effect.type===d.EFFECT_REALTIME_SUB)throw Error("realtime permission required to un/subscribe")}}function Nh(t){return`useChannel:${t.replace(/^.+:/,"")}`}function Ph(t){window.Sentry?.captureMessage?.(t)}class Mh extends qh{constructor(){super(...arguments),this._connections={}}onConnectSock(t,e){var n;(n=this._connections)[t]??(n[t]=new O(this.host)),this._connections[t].subscribe(((t,e)=>({query:{operationName:"SubscribeSubscription",query:"\n        subscription SubscribeSubscription($input: SubscribeInput!) {\n          subscribe(input: $input) {\n            id\n            ... on BasicMessage {\n              data {\n                ... on DevPlatformAppMessageData {\n                  payload\n                }\n              }\n            }\n          }\n        }\n      ",variables:{input:{channel:{teamOwner:"DEV_PLATFORM",category:"DEV_PLATFORM_APP_EVENTS",tag:t}}}},onData:n=>{n.data&&e?.({hook:Nh(t),realtimeEvent:{event:{data:n.data.subscribe.data.payload,channel:t}},scope:h.LOCAL})},reconnectOnClose:!0}))(t,e))}onDisconnectSock(t){this._connections[t].unsubscribe()}onFreeSock(t){delete this._connections[t]}async onSendSock(t,e){await(async t=>{try{const e=await N();if(!e){const t="Failed to fetch auth token from /svc/shreddit/token";throw Ph(t),new Error(t)}const n=await fetch("https://gql-realtime.reddit.com/query",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.token}`},body:JSON.stringify(t)});if(!n.ok){const t=await n.text();throw Ph(`GQL realtime mutation failed with status ${n.status}: ${t}`),new Error(t)}return n.json()}catch(t){throw Ph(`Failed to send realtime event: ${t}`),t}})({query:"\n        mutation publish($input: PublishInput!) {\n          publish(input: $input) {\n            ok\n          }\n        }\n      ",variables:{input:{channel:{teamOwner:"DEV_PLATFORM",category:"DEV_PLATFORM_APP_EVENTS",tag:t},DevPlatformAppMessageData:{payload:e}}}})}}function $h(t,e){const n=t[e]??1;return Math.random()<=n}class Dh{constructor(t){this._appRenderedTimestamp=0,this._localRuntimeInitializedTimestamp=0,this.handleRuntimeErrorEvent=t=>{this.logPerformanceData(t.detail),this._trackPerformance("error","runtime",{devplatform_error_info:{runtime_message:t.detail.message,runtime_origin:t.detail.origin,runtime_version:t.detail.version}})},this._host=t}async trackClientSpan(t,e){const n=performance.now();if(await e()){const e=performance.now();this.trackClientPerformance({name:t,duration:Math.round(e-n)})}}handleClientPerformanceEvent(t){this.trackClientPerformance(t.detail),"blocks_layout"===t.detail.name&&this._trackTTI(),"init_runtime"===t.detail.name&&this._trackTTLR()}handleRuntimePerformanceEvent(t){const e=t.detail;this.logPerformanceData(e),$h(this._host.performanceSampling,e.name)&&this._trackPerformance("trace","runtime",{devplatform_base_trace:{span_name:e.name,duration_ms:e.duration},devplatform_runtime_trace_info:{target:e.target,intent:e.intent,event_count:e.eventCount}})}_getDevvitPerformanceMetadata(){const t={runtime:"web",subreddit_id:this._host.subredditId};if(!this._host.bundle)return t;const e=y(this._host.bundle.hostname);return{...t,app_slug:e.appName,app_version_number:this._host.appVersionNumber}}_trackPerformance(t,e,n){const i=P({source:J,action:t,noun:e},{devplatform:this._getDevvitPerformanceMetadata(),...n});this._host.trackEvent(i)}trackClientPerformance(t){this.logPerformanceData(t),$h(this._host.performanceSampling,t.name)&&this._trackPerformance("trace","client",{devplatform_base_trace:{span_name:t.name,duration_ms:t.duration}})}_trackTTI(){if(this._appRenderedTimestamp)return;const t=this._host.getSurfaceBecameVisibleTimestamp();if(!t)return;this._appRenderedTimestamp=performance.timeOrigin+performance.now();const e=Math.round(this._appRenderedTimestamp-t);this.trackClientPerformance({name:"time_to_first_frame",duration:e}),Dh._firstAppRenderedTimestamp||(Dh._firstAppRenderedTimestamp=this._appRenderedTimestamp,this.trackClientPerformance({name:"initial_time_to_first_frame",duration:e}))}_trackTTLR(){if(this._localRuntimeInitializedTimestamp)return;const t=this._host.getSurfaceBecameVisibleTimestamp();if(!t)return;this._localRuntimeInitializedTimestamp=performance.timeOrigin+performance.now();const e=Math.round(this._localRuntimeInitializedTimestamp-t);this.trackClientPerformance({name:"time_to_local_runtime",duration:e})}logPerformanceData(t){this._host.usePerformanceLogging&&console.info("devvit perf log:",{event:t,metadata:this._getDevvitPerformanceMetadata()})}}var xh;Dh._firstAppRenderedTimestamp=0;const jh=M($(t));let Uh=xh=class extends jh{constructor(){super(...arguments),this.suspendOffScreen=!1,this.isUserLoggedIn=!1,this.useUIRequest=!1,this.useExperimentalBlocks=!1,this.useExperimentalRealtime=!1,this.useSpeculativeExecution=!1,this.usePerformanceLogging=!1,this.theme=Z.System,this.cached="",this.appVersionNumber="",this.performanceSampling={},this._effectHandler=new Oh(this),this.subredditName="",this.webViewUrlTemplate="",this._abortController=new AbortController,this._metadata={},this._performanceTracker=new Dh(this),this.handleLoggedOutUserClick=()=>{this.dispatchEvent(q(U[B]))},this.handleResize=t=>{for(const e of t)this.sendCustomPostDimensions(e.contentRect.height,e.contentRect.width)},this.onThemeChange=t=>{const e=t.detail;e&&void 0!==e.isDarkMode&&(this.theme=e.isDarkMode?Z.Darkmode:Z.Lightmode)},this.handleClientPerformanceEvent=t=>{this._performanceTracker.handleClientPerformanceEvent(t)},this.handleRuntimePerformanceEvent=t=>{this._performanceTracker.handleRuntimePerformanceEvent(t)},this.handleRuntimeErrorEvent=t=>{this._performanceTracker.handleRuntimeErrorEvent(t)}}static _isInIframe(){return globalThis.self!==globalThis.top}static _isTargetOriginValid(t){return Q.includes(t)||t.endsWith(".snoo.dev")}async captureSafetyReport(){if(this.useUIRequest){const t=await this._devvitSurfaceEl;return t?.renderResponse?.blocks?v(m.encode(t.renderResponse.blocks).finish()):this.cached}const t=await this._devvitCustomPostEl;return t?.renderResponse?.blocks?.ui?v(m.encode(t.renderResponse.blocks.ui).finish()):this.cached}connectedCallback(){super.connectedCallback(),this.bundle&&(this.suspendOffScreen?xh._isInIframe()||this.enableObserver():this.startCustomPost(),xh._isInIframe()&&(this._resizeObserver=new ResizeObserver(this.handleResize),this._resizeObserver.observe(this)),this._effectHandler.hostDisconnected(),this.removeController(this._effectHandler),this._effectHandler=this.useExperimentalRealtime?new Mh(this):new Oh(this),document.documentElement.addEventListener("community-colors-change",this.onThemeChange))}willUpdate(){this._fullBundle?this._metadata=E(this._fullBundle.hostname,this.subredditId,this.subredditName,this.userId,this.postId,this.postAuthorId,this._fullBundle.actor?.version):this.bundle&&(this._metadata=E(this.bundle.hostname,this.subredditId,this.subredditName,this.userId,this.postId,this.postAuthorId))}async sendCustomPostDimensions(t,e){if(window?.top&&t&&e&&(!this._postDimensions||t!==this._postDimensions.height)){const n=document.referrer.replace(/\/$/,"");xh._isTargetOriginValid(n)&&window.top.postMessage({loadState:"loaded",height:t,width:e,postId:this.postId},n),this._postDimensions={height:t,width:e}}}disconnectedCallback(){super.disconnectedCallback(),this.removeController(this._effectHandler),this.suspendCustomPost(),this.disableObserver(),document.documentElement.removeEventListener("community-colors-change",this.onThemeChange)}suspendCustomPost(){this._abortController&&this._abortController.abort(),this._remoteApp=void 0,this._fullBundle=void 0}async startCustomPost(){this._remoteApp||(this._remoteApp=I(this.bundle.hostname),this._abortController=new AbortController,await this._performanceTracker.trackClientSpan("fetch_full_bundle",(async()=>(this._fullBundle=await k(this.bundle.hostname,this._abortController),Boolean(this._fullBundle)))))}observerIsIntersectingCallback(){this.bundle&&this.startCustomPost()}getSurfaceBecameVisibleTimestamp(){return this.closest("shreddit-post")?.becameVisibleOnScreenTimestamp}render(){if(!this._remoteApp)return e`<slot></slot>`;const t=(n=this.theme)===Z.Darkmode?"dark":n===Z.Lightmode?"light":"";var n;return this.useUIRequest?e`\n <div class="relative">\n <devvit-surface \n class="block" \n ?allow-webview="${Object.keys(this._fullBundle?.webviewAssets??{}).length>0}" \n .remoteApp="${this._remoteApp}" \n .requestProps="${{postId:this.postId}}" \n .localRuntimeCode="${S}" \n .bundle="${this._fullBundle}" \n .metadata="${this._metadata}" \n .useExperimentalBlocks="${this.useExperimentalBlocks}" \n .scheme="${t||void 0}" \n .webViewUrlTemplate="${this.webViewUrlTemplate}" \n @devvit-client-performance-report="${this.handleClientPerformanceEvent}" \n @devvit-runtime-performance-report="${this.handleRuntimePerformanceEvent}" \n @devvit-runtime-error="${this.handleRuntimeErrorEvent}" \n>\n <slot></slot>\n </devvit-surface>\n ${this.isUserLoggedIn?e``:e`<button \n @click="${this.handleLoggedOutUserClick}" \n class="absolute top-0 left-0 w-full h-full bg-transparent border-none cursor-pointer" \n></button>`}\n </div>\n `:e`\n <div class="relative">\n <devvit-custom-post \n class="block" \n ?allow-webview="${Object.keys(this._fullBundle?.webviewAssets??{}).length>0}" \n .remoteApp="${this._remoteApp}" \n .postId="${this.postId}" \n .localRuntimeCode="${S}" \n .bundle="${this._fullBundle}" \n .metadata="${this._metadata}" \n .postConfig="${this.settings?.fields}" \n .useExperimentalBlocks="${this.useExperimentalBlocks}" \n .scheme="${t||void 0}" \n .webViewUrlTemplate="${this.webViewUrlTemplate}" \n>\n <slot></slot>\n </devvit-custom-post>\n ${this.isUserLoggedIn?e``:e`<button \n @click="${this.handleLoggedOutUserClick}" \n class="absolute top-0 left-0 w-full h-full bg-transparent border-none cursor-pointer" \n></button>`}\n </div>\n `}};Uh.styles=[n``,D],x([L()],Uh.prototype,"_remoteApp",void 0),x([L()],Uh.prototype,"_fullBundle",void 0),x([L()],Uh.prototype,"_postDimensions",void 0),x([A({type:Boolean,attribute:"suspend-off-screen"})],Uh.prototype,"suspendOffScreen",void 0),x([A({type:Boolean,attribute:"user-logged-in"})],Uh.prototype,"isUserLoggedIn",void 0),x([A({attribute:"use-ui-request",type:Boolean})],Uh.prototype,"useUIRequest",void 0),x([A({type:Boolean})],Uh.prototype,"useExperimentalBlocks",void 0),x([A({type:Boolean})],Uh.prototype,"useExperimentalRealtime",void 0),x([A({type:Boolean})],Uh.prototype,"useSpeculativeExecution",void 0),x([A({type:Boolean})],Uh.prototype,"usePerformanceLogging",void 0),x([A({type:String})],Uh.prototype,"theme",void 0),x([A({type:String})],Uh.prototype,"cached",void 0),x([A({type:String,attribute:"app-version-number"})],Uh.prototype,"appVersionNumber",void 0),x([A({type:Object,attribute:"performance-sampling"})],Uh.prototype,"performanceSampling",void 0),x([A({converter:{fromAttribute:t=>R.decode(_(t))}})],Uh.prototype,"bundle",void 0),x([A({converter:{fromAttribute:t=>g.decode(_(t))}})],Uh.prototype,"settings",void 0),x([A({type:String})],Uh.prototype,"postId",void 0),x([A({type:String})],Uh.prototype,"postAuthorId",void 0),x([A({type:String})],Uh.prototype,"userId",void 0),x([A({type:String})],Uh.prototype,"subredditId",void 0),x([A({type:String})],Uh.prototype,"subredditName",void 0),x([A({type:String})],Uh.prototype,"webViewUrlTemplate",void 0),x([j("devvit-custom-post")],Uh.prototype,"_devvitCustomPostEl",void 0),x([j("devvit-surface")],Uh.prototype,"_devvitSurfaceEl",void 0),Uh=xh=x([C("shreddit-devvit-ui-loader")],Uh);let Bh=class extends(M(t)){constructor(){super(),this._isInViewport=!1,this._consumed=!1,this._viewed=!1,this.postId="",this.subredditId="",this.isWatermarkEnabled=!1,this.handleIntersectionObserverLeave=()=>{this._isInViewport=!1,this._consumeTimer&&(window.clearTimeout(this._consumeTimer),this._consumeTimer=void 0)},this.handleViewAndConsumeV2Event=()=>{this._isInViewport=!0,this._viewed||(this._viewed=!0,this.onPostV2EventAction("view")),this.handleConsumeV2Event()},this.handleConsumeV2Event=()=>{this._consumeTimer||this._consumed||(this._consumeTimer=window.setTimeout((()=>{this._isInViewport&&!this._consumed&&(this._consumed=!0,this.onPostV2EventAction("consume"))}),2e3))},this.getBlockTypeFromElement=t=>{let e="";if(t.dataset?.blockType)e=t.dataset.blockType??"";else if(t.hasChildNodes()){const n=Array.from(t.childNodes).find((t=>t.nodeType===Node.ELEMENT_NODE));n?.dataset?.blockType&&(e=n.dataset.blockType??"")}return e},this.handleClickV2Event=t=>{let e="";if(t?.composedPath()[0]){const n=t?.composedPath()[0];e=this.getBlockTypeFromElement(n)}this.onPostV2EventAction("click",e)},new W(this,this,{rootMargin:"0px"}),this.addEventListener("faceplate-enter",this.handleViewAndConsumeV2Event),this.addEventListener("faceplate-leave",this.handleIntersectionObserverLeave)}disconnectedCallback(){this.removeEventListener("faceplate-enter",this.handleViewAndConsumeV2Event),this.removeEventListener("faceplate-leave",this.handleIntersectionObserverLeave)}onPostV2EventAction(t,e){const n=P(Y({postId:this.postId||"",subredditId:this.subredditId||"",blockType:e||"",pageType:this.pageType,action:t,noun:"custom_post",appInstallationId:this.appInstallationId||"",appVersionNumber:this.appVersionNumber||"",appId:this.appId||"",appSlug:this.appSlug||"",appName:this.appSlug||"",userAgent:this.userAgent||"",watermark:this.isWatermarkEnabled?"v1":void 0}));this.trackEvent(n)}render(){return e`\n <div \n class="relative" \n data-test-id="devvit-post" \n @click="${t=>this.handleClickV2Event(t)}" \n @keydown="${t=>this.handleClickV2Event(t)}" \n>\n <slot></slot>\n </div>\n `}};Bh.styles=[D],x([L()],Bh.prototype,"_isInViewport",void 0),x([L()],Bh.prototype,"_consumeTimer",void 0),x([L()],Bh.prototype,"_consumed",void 0),x([L()],Bh.prototype,"_viewed",void 0),x([A({type:String,attribute:"post-id"})],Bh.prototype,"postId",void 0),x([A({type:String,attribute:"subreddit-id"})],Bh.prototype,"subredditId",void 0),x([A({type:String,attribute:"app-id"})],Bh.prototype,"appId",void 0),x([A({type:String,attribute:"app-slug"})],Bh.prototype,"appSlug",void 0),x([A({type:String,attribute:"app-installation-id"})],Bh.prototype,"appInstallationId",void 0),x([A({type:String,attribute:"app-version-number"})],Bh.prototype,"appVersionNumber",void 0),x([A({type:String,attribute:"app-name"})],Bh.prototype,"appName",void 0),x([A({type:String,attribute:"page-type"})],Bh.prototype,"pageType",void 0),x([A({type:String,attribute:"user-agent"})],Bh.prototype,"userAgent",void 0),x([A({type:Boolean,attribute:"watermark-enabled"})],Bh.prototype,"isWatermarkEnabled",void 0),Bh=x([C("devvit-post-consume-tracker")],Bh);
//# sourceMappingURL=devvit-ui-fragment-client-js-955b2b9b.js.map
